(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{"+ZDR":function(t,e){!function(){"use strict";PF.ProductAlternatives.ProductListItem=Class({_productItem:null,_usedColors:null,_callback:null,_colors:{},_missingColors:{},__construct:function(t){this._productItem=t.product,this._usedColors=t.usedColors,this._callback=t.callback,this._parseColors(),this._render()},_parseColors:function(){for(var t in this._usedColors){var e=this._usedColors[t].color;this._productHasColor(e.colorName)?this._colors[e.colorName]=[e.colorCode,e.colorCode2]:this._missingColors[e.colorName]=[e.colorCode,e.colorCode2]}},_productHasColor:function(t){for(var e in this._productItem.colors)if(this._productItem.colors[e].colorName===t)return!0;return!1},_render:function(){this.node=tag("div","col-xs-6 col-md-3",[tag("div","product-item pf-pb-12 pf-mb-16",[tag("div",{attr:{role:"button"},onclick:this._callback.bind(this,this._productItem)},[tag("div",{className:"square-box",style:{backgroundImage:'url("'+encodeURI(this._productItem.urlImage)+'")'}}),tag("div","pf-ui-body pf-px-16 pf-mt-16",[tag("div","pf-mb-12",this._productItem.getFullTitle()),tag("div","pf-bold",dlang("products","Alternative for")),this._renderColorPicker(this._colors),tag("div","pf-bold",dlang("products","Missing colors")),this._renderColorPicker(this._missingColors)])]),this._productItem.shouldShowAvailabilityTab()?tag("a",{className:"pf-mx-16",href:this._productItem.getProductPageUrl()+"#availability",target:"_blank"},dlang("products","Check Availability")):null])])},_renderColorPicker:function(t){if($.isEmptyObject(t))return tag("div");var e=new PF.Components.ColorPicker.Par;return e.colors=t,tag("div","",[new PF.Components.ColorPicker(e)])}},mkE.Base)}()},28:function(t,e,o){o("F2r8"),o("Sy2n"),o("8K9v"),o("P/nQ"),o("z65X"),o("NGBb"),o("pRRn"),o("xjM1"),o("nSa4"),o("+ZDR"),o("uxWV"),t.exports=o("Wsbe")},"8K9v":function(t,e){!function(){"use strict";PF.ProductAlternatives.UsedColor=Class({color:{},missingSizes:[],outstockVariantCount:0,recommendedAlternatives:[],replacementColor:"",replacementProductId:0,usageCount:0})}()},F2r8:function(t,e){!function(){"use strict";PF.ProductAlternatives=Class({_par:null,_tabs:null,_productsPicker:null,_productsPickerNode:null,_alternativesPicker:null,_alternativesConfigurator:null,_breadcrumbs:null,_errorNode:null,_searchKeywords:"",_productsRepository:null,__construct:function(t){this._par=t,this.node=mkE({tag:"div"}),this._productsPickerNode=mkE({tag:"div"}),this._productsRepository=new PF.Repositories.Products,this._productsRepository.setCurrency(t.currency),window.onpopstate=function(){location.reload()},this._render(),this._openInfoPopup(!1)},_onProductPicked:function(t,e){var o=this._findItem(t.productId);this._productsRepository.getProductsById(o.recommendedAlternativeProductIds,this._renderAlternativesPicker.bind(this,t,o,e))},_render:function(){if(this._renderProductsPicker(),mkE.clearNode(this.node),this._par.replacementsFor)this._onProductPicked(this._productsPicker.getProductById(this._par.replacementsFor),null);else{this._renderBreadcrumbs(null),this._renderInfoMessage();var t=new PF.Components.SearchBox.Par;t.callback=this._onSearch,t.placeholder=lang("Search"),t.keywords=this._searchKeywords;var e=new PF.Components.SearchBox(t);mkE.addClassName(e.node,"pull-right"),e.append(this.node),this._renderTabs(),this._productsPickerNode.append(this.node)}},_renderAlternativesPicker:function(t,e,o,r){if(r)if(this._renderBreadcrumbs(t),this._par.alternativeProductId&&this._par.selectedProductId)this._renderAlternativesConfigurator(t,e,r,this._productsRepository.getCachedProductById(this._par.alternativeProductId));else{var s=this._hasReplacement(e.usedColors);if(o instanceof PF.Items.ProductItem&&s)this._renderAlternativesConfigurator(t,e,r,o);else{this._pushHistoryState({productId:t.productId}),mkE.clearNode(this.node),tag("div","",[tag("h4","pf-m-0 pf-h4",dlang("products","Choose alternative for")),tag("p","pf-ui-body pf-mb-32",t.getFullTitle())]).append(this.node),tag("div","pf-mb-32",[new PF.Components.Steps([dlang("products","Choose best alternative"),dlang("products","Review and approve")])]).append(this.node);var a=tag("div","row row-flex");for(var n in r)new PF.ProductAlternatives.ProductListItem({product:r[n],usedColors:e.usedColors,callback:this._renderAlternativesConfigurator.bind(this,t,e,r)}).append(a);a.append(this.node)}}},_renderAlternativesConfigurator:function(t,e,o,r){mkE.clearNode(this.node);var s=new PF.ProductAlternatives.Configurator.Par;s.productItem=t,s.alternativeItem=e,s.alternativeProductItem=r,s.recommendedProducts=o,s.onFinish=this._saveResults,s.onCancel=this._cancel,this._alternativesConfigurator=new PF.ProductAlternatives.Configurator(s),this._alternativesConfigurator.append(this.node),this._errorNode=mkE({tag:"div",className:"alert alert-danger hidden"}).append(this.node),this._pushHistoryState({productId:t.productId,alternativeId:r.productId})},_renderTabs:function(){this._tabs=new PF.Components.Tabs("secondary");var t=new PF.Components.Tabs.Item;t.caption=tag("span","",[lang("All")+" ",tag("span","pf-normal","("+this._getProducts().length+")")]),t.onclick=this._onTabClick.bind(this,!1),t.isActive=!0,this._tabs.add(t);var e=this._getUrgentCount();if(e>0){var o=new PF.Components.Tabs.Item;o.caption=tag("span","",[dlang("orders","Out of stock")+" ",tag("span","pf-normal text-danger","("+e+")")]),o.onclick=this._onTabClick.bind(this,!0),this._tabs.add(o)}this._tabs.append(this.node)},_renderBreadcrumbs:function(t){this._par.breadcrumbs.clear(),this._par.breadcrumbs.add({title:lang("Stores"),href:langUrl("/dashboard/store")}),this._par.breadcrumbs.add({title:this._par.storeName,href:langUrl("/dashboard/sync")+"?store="+this._par.storeId}),this._par.breadcrumbs.add({title:lang("Alternatives"),href:t&&langUrl("/dashboard/sync/alternatives")+"?store="+this._par.storeId}),t&&this._par.breadcrumbs.add({title:t.model})},_renderInfoMessage:function(){mkE({tag:"table",className:"table margin-top-10 alternative__info-table",els:[{tag:"tr",els:[{tag:"td",els:[{tag:"strong",className:"margin-bottom-5 btn-block",text:dlang("products","Choose alternatives for your synced products")},dlang("products","Set alternatives for us to print on when your original product is out of stock")]},{tag:"td",className:"alternative__info-table__button-wrap",els:[{tag:"a",className:"btn btn-default",text:lang("Read more"),onclick:this._openInfoPopup.bind(this,!0)}]}]}]}).append(this.node)},_renderProductsPicker:function(){mkE.clearNode(this._productsPickerNode),this._productsPicker=new PF.ProductAlternatives.Picker(this._getProducts(),this._par.storeProducts,this._par.alternativeItems,this._par.selectedProductId,this._onProductPicked,this._resetAlternatives),this._productsPicker.append(this._productsPickerNode)},_findItem:function(t){for(var e in this._par.alternativeItems)if(t===this._par.alternativeItems[e].productId)return this._par.alternativeItems[e];return null},_getProducts:function(){var t=[];for(var e in this._par.storeProducts){var o=this._findItem(this._par.storeProducts[e].productId),r=this._par.storeProducts[e];o&&o.recommendedAlternativeProductIds.length&&(this._searchKeywords&&!this._isProductMatchingKeywords(r)||t.push(r))}return t},_isProductMatchingKeywords:function(t){if(!this._searchKeywords)return!0;var e=this._searchKeywords.split(" "),o=0;for(var r in e)(t.model.toLowerCase().indexOf(e[r])>-1||t.brand.toLowerCase().indexOf(e[r])>-1)&&o++;return o===e.length},_saveResults:function(t,e){var o={storeId:this._par.storeId,productId:e,alternatives:t};(new PF.Repositories.SyncRepository).saveAlternatives(o,function(t){if(!t){var e=new Url(langUrl("/dashboard/sync/alternatives"));return e.query.store=this._par.storeId,void(window.location.href=e.toString())}this._setError(t)}.bind(this))},_resetAlternatives:function(t){var e={storeId:this._par.storeId,productId:t,withFlash:0};(new PF.Repositories.SyncRepository).saveAlternatives(e,function(t){t&&this._setError(t)}.bind(this))},_getUrgentCount:function(){var t=0;for(var e in this._urgentProductIds=[],this._par.alternativeItems){var o=this._par.alternativeItems[e];o.outstockVariantCount>0&&0===o.replacementColorCount&&o.recommendedAlternativeProductIds.length&&(this._urgentProductIds.push(o.productId),t++)}return t},_pushHistoryState:function(t){var e=new Url(langUrl("/dashboard/sync/alternatives"));for(var o in e.query.store=this._par.storeId,t)e.query[o]=t[o];window.location.toString()!==e.toString()&&history.pushState({},"",e.toString())},_setError:function(t){mkE.clearNode(this._errorNode),mkE.setNodeText(this._errorNode,t),mkE.removeClassName(this._errorNode,"hidden")},_openInfoPopup:function(t){new PF.ProductAlternatives.InfoPopup(t,this._par.text)},_onSearch:function(t){this._searchKeywords=t.toLowerCase(),this._renderProductsPicker()},_onTabClick:function(t){var e=this._getProducts(),o=[];if(this._productsPicker.offset=0,t)for(var r in e){var s=e[r];this._urgentProductIds.indexOf(s.productId)>-1&&o.push(s)}else o=e;this._productsPicker.render(o)},_hasReplacement:function(t){for(var e in t){if(null!==t[e].replacementProductId)return!0}return!1},_cancel:function(){var t=new Url(langUrl("/dashboard/sync/alternatives"));t.query.store=this._par.storeId,window.location.href=t.toString()}},mkE.Base)}()},NGBb:function(t,e){!function(){"use strict";PF.ProductAlternatives.Picker.ProductRow=Class({_productItem:null,_onProductPickedCallback:null,_usedColors:[],_usedSizes:[],_missingSizesData:[],__construct:function(t,e,o,r,s){this._productItem=t,this._usedColors=o.colors,this._usedSizes=o.sizes,this._missingSizesData=e.missingSizesData,this._onProductPickedCallback=r,this._onProductResetCallback=s,this.node=mkE({tag:"tr",className:"alternative__product alternative__product-original"}),this._render(e)},_render:function(t){mkE.clearNode(this.node);var e=new PF.Components.ColorPicker.Par;e.colors=this._formatColors(this._usedColors),e.onChange=function(){},e.isColorClickable=!1;var o="";t.isOutOfStock&&(o=mkE({tag:"a",className:"label label-warning margin-right-5",text:dlang("products","Supplier Out of Stock"),style:{verticalAlign:"text-top",backgroundColor:"#f0ad4e"},prop:{onclick:this._showOutOfStockModal.bind(this)},attr:{title:dlang("products","This product is temporarily out of stock. Please switch to a comparable product or wait until we have more in stock.")}})),mkE({tag:"td",className:"alternative__product-image__wrap",els:[{tag:"div",className:"alternative__product-image margin-right-10",style:{backgroundImage:"url("+this._productItem.urlImage+")"}}]}).append(this.node),mkE({tag:"td",className:"alternative__product-inner",els:[{tag:"div",className:"alternative__product-info",els:[{tag:"div",className:"margin-bottom-5",els:[o,{tag:"span",text:this._productItem.title,style:{fontWeight:"bold",verticalAlign:"text-bottom"}}]},{tag:"div",style:{marginBottom:"3px"},text:dlang("dashboard","Model")+": "+this._productItem.model},{tag:"div",style:{marginBottom:"3px"},text:dlang("dashboard","Brand")+": "+this._productItem.brand},{tag:"div",text:dlang("dashboard","Size")+": "+this._usedSizes.join(" ")},{tag:"div",className:"alternative__product-swatches margin-top-5",els:[new PF.Components.ColorPicker(e)]}]}]}).append(this.node),mkE({tag:"td",els:[new PF.ProductAlternatives.Picker.ProductAlternative(t,this._missingSizesData,this._onChange,this._onReset.bind(this,t))]}).append(this.node)},_onChange:function(t){this._onProductPickedCallback(this._productItem,t)},_onReset:function(t){t.productItems.splice(0),this._render(t),this._onProductResetCallback(this._productItem.productId)},_formatColors:function(t){var e={};for(var o in t){var r=t[o].color;if(r.colorCode){var s=[r.colorCode.toUpperCase()];r.colorCode2&&s.push(r.colorCode2.toUpperCase()),e[r.colorName]=s}}return e},_showOutOfStockModal:function(){var t=new PF.Modal;t.setTitle(dlang("products","Stock information"));var e=dlang("products","If an order is placed with an <nobr>out-of-stock </nobr> product that has no alternatives set up, it'll take longer to process it. So you may want to temporarily disable these products on your store.");t.setContent(mkE({tag:"div",els:[{tag:"p",text:dlang("products","This product is currently out of stock (not available at Printful or from our suppliers).")},{tag:"p",innerHtml:e},{tag:"p",text:dlang("products",'If your integration supports the automatic stock update feature, we recommend enabling it to take care of out-of-stock updates in your store. You can enable it in the "Orders" tab in your store\'s settings.')}]})),t.show()}},mkE.Base)}()},"P/nQ":function(t,e){!function(){"use strict";PF.ProductAlternatives.Picker=Class({_products:null,_storeProducts:null,_onProductPicked:null,_onResetCallback:null,_productsList:null,_paginationNode:null,_alternativeItems:null,productsPerPage:10,offset:0,page:1,__construct:function(t,e,o,r,s,a){this._products=t,this._storeProducts=e,this._onProductPicked=s,this._onResetCallback=a,this._alternativeItems=o,this._selectedProduct=this.getProductById(r),this.node=mkE({tag:"table",className:"table",style:{tableLayout:"static"},els:[{tag:"thead",className:"alternative__product-table-head",els:[{tag:"tr",els:[{tag:"th",attr:{colspan:2},style:{width:"50%"},text:dlang("products","PRODUCT")},{tag:"th",style:{width:"50%"},text:dlang("products","ALTERNATIVE")}]}]},this._productsList=mkE({tag:"tbody"})]}),this._selectedProduct?this._onProductPicked(this._selectedProduct,t[0]):this.render(t)},getProductById:function(t){for(var e in this._storeProducts)if(this._storeProducts[e].productId===t)return this._storeProducts[e]},_getAlternativeProductsData:function(t){for(var e in this._alternativeItems)if(t===this._alternativeItems[e].productId){var o=this._alternativeItems[e],r=this._parseAlternativeProductItems(o),s=[],a={},n=[],i=!1;for(var d in r){var l=this.getProductById(parseInt(d));l&&s.push(l)}for(var c in o.outstockVariantCount>0&&0===o.replacementColorCount&&o.recommendedAlternativeProductIds.length&&(i=!0),o.usedColors){var u=o.usedColors[c];u.replacementProductId||n.push(u.color),u.missingSizes.length&&(a.hasOwnProperty(u.color.colorName)||(a[u.color.colorName]={color:u.color,productId:u.replacementProductId,sizes:[]}),a[u.color.colorName].sizes=a[u.color.colorName].sizes.concat(u.missingSizes))}return{productItems:s,missingSizesData:a,missingColorsData:n,data:this._parseAlternativeProductItems(this._alternativeItems[e]),isOutOfStock:i}}},_parseAlternativeProductItems:function(t){var e={};for(var o in t.usedColors){var r=t.usedColors[o];r.replacementProductId&&(e.hasOwnProperty(r.replacementProductId)?e[r.replacementProductId].colors.push(r.color):e[r.replacementProductId]={colors:[r.color],missingSizes:[]},e[r.replacementProductId].missingSizes=e[r.replacementProductId].missingSizes.concat(r.missingSizes))}return e},_getUsedColorsAndSizes:function(t){for(var e in this._alternativeItems)if(this._alternativeItems[e].productId===t)return{colors:this._alternativeItems[e].usedColors,sizes:this._alternativeItems[e].usedSizes}},_onPaginate:function(t){this.page=t,this.offset=(t-1)*this.productsPerPage,this.render(this._products)},_renderEmpty:function(){mkE({tag:"tr",els:[{tag:"td",attr:{colspan:3},els:[{tag:"div",className:"alternative__no-products padding-vertical-30",els:[{tag:"img",className:"img-responsive",src:"/static/images/alternatives/no-alternatives@2x.png",style:{maxWidth:"215px",margin:"0 auto 30px"}},dlang("products","There are no alternatives available for your synced products")]}]}]}).append(this._productsList)},render:function(t){mkE.clearNode(this._productsList),this._paginationNode&&mkE.clearNode(this._paginationNode),t.length||this._renderEmpty();var e=0;for(this.offset;this.offset<t.length;this.offset++){e++;var o=t[this.offset];if(new PF.ProductAlternatives.Picker.ProductRow(o,this._getAlternativeProductsData(o.productId),this._getUsedColorsAndSizes(o.productId),this._onProductPicked,this._onResetCallback).append(this._productsList),e===this.productsPerPage)break}if(t.length>this.productsPerPage){var r=new PF.Components.Paging.Par;r.page=this.page,r.pages=Math.ceil(this._products.length/this.productsPerPage),r.callback=this._onPaginate,this._paginationNode=mkE({tag:"tr",els:[{tag:"td",attr:{colspan:"4"},els:[new PF.Components.Paging(r)]}]}).append(this.node)}}},mkE.Base)}()},QxQC:function(t,e,o){"use strict";function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function s(t,e,o){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return o}o.d(e,"a",(function(){return a}));var a=function t(e,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.add(this),n.add(this),this.node=mkE({tag:"div",className:"alternative__status-message alternative__status-message--"+o,els:[e]}),a?this.node.append(document.getElementById(a)):this.node.append(document.body),setTimeout(s(this,n,d).bind(this),500),setTimeout(s(this,i,l).bind(this),r+500)},n=new WeakSet,i=new WeakSet;r(a,"TYPE_SUCCESS","success"),r(a,"TYPE_WARNING","warning"),r(a,"TYPE_ERROR","error");var d=function(){mkE.addClassName(this.node,"alternative__status-message--visible")},l=function(){mkE.removeClassName(this.node,"alternative__status-message--visible"),setTimeout(mkE.removeNode.bind(this,this.node),500)}},Sy2n:function(t,e){!function(){"use strict";PF.ProductAlternatives.Par=Class({storeId:null,storeName:"",currency:"",storeProducts:[],alternativeItems:[],selectedProductId:null,replacementsFor:null,alternativeProductId:null,breadcrumbs:null,total:0})}()},Wsbe:function(t,e,o){"use strict";o.r(e);var r=o("QxQC");PF.ProductAlternatives.StatusMessage=r.a},nSa4:function(t,e){!function(){"use strict";PF.ProductAlternatives.Configurator.ColorRow=Class({_usedColors:null,_recommendedProducts:null,_recommendedColorName:"",_modelSelectNode:null,_colorSelectNode:null,_priceNode:null,_alternativeProductItem:null,_productItem:null,_useRecommended:!0,__construct:function(t,e,o,r,s){this._usedColors=t,this._recommendedProducts=e,this._productItem=o,this._useRecommended=r;var a=new PF.Components.ColorPicker.Par;a.colors[t.color.colorName]=[t.color.colorCode],t.color.colorCode2&&a.colors[t.color.colorName].push(t.color.colorCode2),a.showHuge=!0,a.showInline=!0,this._priceNode=mkE({tag:"td",className:"alternative__configurator-table__row-price",text:"-"}),this._colorSelectNode=this._renderAlternativeColorSelect(),this._modelSelectNode=this._renderAlternativeModelSelect(),this.node=mkE({tag:"tr",className:"alternative__configurator-table__row",els:[{tag:"td",className:"swatches",els:[new PF.Components.ColorPicker(a),{tag:"span",className:"swatches__name margin-left-10",text:t.color.colorName}]},{tag:"td",className:"alternative__configurator-table__row-model",els:[this._modelSelectNode]},{tag:"td",className:"alternative__configurator-table__row-color",els:[this._colorSelectNode]},this._priceNode]}),this._usedColors.replacementProductId?this._setSavedProductItem():this._setRecommendedAlternativeProductItem(s)},_renderAlternativeModelSelect:function(){var t=new PF.DropdownPicker;t.setDefaultLabel(lang("Select model")),t.onchange=this._onModelChange,t.addEmptyItem();var e=new PF.DropdownPicker.Group(dlang("products","Recommended")),o=new PF.DropdownPicker.Group(dlang("products","Other"));for(var r in this._recommendedProducts){var s=this._recommendedProducts[r],a=new PF.DropdownPicker.ItemProduct(s);this._isRecommendedProduct(s.productId)?e.addItem(a):o.addItem(a)}return e.hasItems()&&t.addGroup(e),o.hasItems()&&t.addGroup(o),t},_renderAlternativeColorSelect:function(){var t=new PF.DropdownPicker;return t.setDefaultLabel(dlang("products","Select color")),t.onchange=this._onColorChange,t.addEmptyItem(),t},_onModelChange:function(){for(var t in this._alternativeProductItem=null,this._recommendedColorName=null,this._colorSelectNode.clear(),this._recommendedProducts)if(this._modelSelectNode.getValue()==this._recommendedProducts[t].productId){this._alternativeProductItem=this._recommendedProducts[t],this._setRecommendedColor(this._alternativeProductItem);break}this._setColors(),this._setPrice()},_onColorChange:function(){this._recommendedColorName=this._colorSelectNode.getValue()},_setRecommendedColor:function(t){var e=!1;for(var o in this._usedColors.recommendedAlternatives){var r=!1;for(var s in t.colors)if(this._usedColors.recommendedAlternatives[o].color===t.colors[s].colorName){r=!0;break}if(t.productId===this._usedColors.recommendedAlternatives[o].productId&&r){this._recommendedColorName=this._usedColors.recommendedAlternatives[o].color,e=!0;break}}return e},_setColors:function(){if(this._alternativeProductItem){var t=new PF.DropdownPicker.Group(dlang("products","Recommended")),e=new PF.DropdownPicker.Group(dlang("products","Other"));for(var o in this._alternativeProductItem.colors){var r=this._alternativeProductItem.colors[o],s=new PF.DropdownPicker.ItemColor(r.colorName,[r.colorCode,r.colorCode2]);this._isRecommendedColor(r.colorName)?t.addItem(s):e.addItem(s)}t.hasItems()&&this._colorSelectNode.addGroup(t),e.hasItems()&&this._colorSelectNode.addGroup(e),this._recommendedColorName&&this._colorSelectNode.setValue(this._recommendedColorName)}},_setPrice:function(){if(this._alternativeProductItem){var t=this._alternativeProductItem.priceRange.minPrice-this._productItem.priceRange.minPrice;t=t>0?"+"+prettyMoney(t,this._productItem.priceRange.currency):prettyMoney(t,this._productItem.priceRange.currency),mkE.setNodeText(this._priceNode,t)}},_setRecommendedAlternativeProductItem:function(t){this._setRecommendedColor(t)&&this._useRecommended?(this._alternativeProductItem=t,this._modelSelectNode.setValue(t.productId),this._colorSelectNode.setValue(this._recommendedColorName)):mkE.addClassName(this.node,"alternative__configurator-table__row--empty")},_setSavedProductItem:function(){for(var t in this._recommendedProducts){var e=this._recommendedProducts[t];if(this._usedColors.replacementProductId==e.productId){this._modelSelectNode.setValue(e.productId),this._colorSelectNode.setValue(this._usedColors.replacementColor);break}}},_isRecommendedProduct:function(t){if(!this._usedColors.recommendedAlternatives.length)return!1;for(var e in this._usedColors.recommendedAlternatives)if(this._usedColors.recommendedAlternatives[e].productId===t)return!0;return!1},_isRecommendedColor:function(t){if(!this._usedColors.recommendedAlternatives.length)return!1;for(var e in this._usedColors.recommendedAlternatives)if(this._usedColors.recommendedAlternatives[e].color===t)return!0;return!1},isValid:function(){return!this._alternativeProductItem||(!!this._recommendedColorName||(this._showErrorMessage(),!1))},_showErrorMessage:function(){this._colorSelectNode.addError(),new PF.ProductAlternatives.StatusMessage(dlang("products","Please choose color"),PF.ProductAlternatives.StatusMessage.TYPE_ERROR,3e3),$("html,body").animate({scrollTop:$(this.node).offset().top-100},1e3)},getValues:function(){return this._alternativeProductItem?{color:this._usedColors.color.colorName,replacementProductId:this._alternativeProductItem.productId,replacementColor:this._recommendedColorName}:null}},mkE.Base)}()},pRRn:function(t,e){!function(){"use strict";PF.ProductAlternatives.Configurator=Class({_par:null,_colorRows:[],_useRecommended:!0,__construct:function(t){this._par=t,this._useRecommended=0===this._par.alternativeItem.replacementColorCount,this.node=tag("div","col-12 pf-mb-32",[tag("h5","pf-m-0 pf-h4",dlang("products","Choose alternative for")),tag("div","pf-mb-32",this._par.productItem.brand+" "+this._par.productItem.model)]);var e=new PF.Components.Steps([dlang("products","Choose best alternative"),dlang("products","Review and approve")]);e.setStep(2),tag("div","pf-mb-32",[e]).append(this.node),this._renderColors(),tag("div","",[tag("a",{className:"btn btn-danger",text:dlang("products","Set alternatives"),onclick:this._onFinish}),tag("a",{className:"btn btn-link",text:lang("Cancel"),onclick:this._onCancel})]).append(this.node)},_renderColors:function(){var t=mkE({tag:"span",className:"glyphicon glyphicon-info-sign margin-left-5",attr:{title:dlang("products","The change in price compared to the out-of-stock-product")}}),e=mkE({tag:"table",className:"table alternative__configurator-table",els:[{tag:"thead",className:"alternative__configurator-table-head",els:[{tag:"tr",els:[{tag:"th",style:{width:"18%"},text:dlang("products","ALTERNATIVE FOR")},{tag:"th",style:{width:"36%"},text:dlang("products","ALTERNATIVE MODEL")},{tag:"th",style:{width:"36%"},text:dlang("products","ALTERNATIVE COLOR")},{tag:"th",els:[dlang("products","PRICE"),t]}]}]}]});for(var o in this._par.alternativeItem.usedColors){var r=this._par.alternativeItem.usedColors[o],s=new PF.ProductAlternatives.Configurator.ColorRow(r,this._par.recommendedProducts,this._par.productItem,this._useRecommended,this._par.alternativeProductItem);s.append(e),this._colorRows.push(s)}e.append(this.node),$([t]).tooltip({html:!0,delay:{hide:750},container:"body"})},_validate:function(){var t=!0;for(var e in this._colorRows)if(!this._colorRows[e].isValid()){t=!1;break}return t},_onFinish:function(){if(!this._validate())return!1;var t=[];for(var e in this._colorRows){var o=this._colorRows[e].getValues();o&&t.push(o)}this._par.onFinish(t,this._par.productItem.productId)},_onCancel:function(){this._par.onCancel()}},mkE.Base)}()},uxWV:function(t,e){!function(){"use strict";PF.ProductAlternatives.InfoPopup=Class({_key:"shownAlternativesInfoPopup",_text:{},__construct:function(t,e){if(this._text=e,localStorage){var o=localStorage.getItem(this._key);o||(o=0),(o<2||t)&&(this._showGraphicPlacementHintPopup(),this._setStorageItem(++o))}},_getList:function(t){return mkE({tag:"li",innerHTML:t})},_showGraphicPlacementHintPopup:function(){var t=new PF.Modal({modalDialogClass:"modal-dialog modal-dialog__embroidery-info"});t.setHeaderContent(""),t.setContent(mkE({tag:"div",els:[{tag:"div",className:"padding-bottom-30 padding-top-15 padding-horizontal-20",els:[{tag:"h1",innerHTML:this._text.title,className:"margin-bottom-15",style:{fontSize:"20px"}},this._videoEmbed=mkE({tag:"div",className:"video-embed margin-bottom-25",style:{maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},els:[{tag:"iframe",src:"https://www.youtube.com/embed/OiBASoJY0e0",attr:{width:560,height:315,frameborder:0,allowfullscreen:""}}]}),{tag:"p",innerHTML:this._text.paragraph},{tag:"div",className:"margin-bottom-5",innerHTML:this._text.list},{tag:"a",className:"btn btn-danger",text:dlang("library","OK, got it"),prop:{onclick:$.proxy(this._confirm,this,t)}}]}]})),t.show(),$([this._videoEmbed]).fitVids()},_confirm:function(t){t.remove(),this._setStorageItem(10)},_setStorageItem:function(t){try{localStorage.setItem(this._key,t)}catch(t){console.log("Local storage not supported")}}})}()},xjM1:function(t,e){!function(){"use strict";PF.ProductAlternatives.Configurator.Par=Class({productItem:null,alternativeProductItem:null,alternativeItem:null,recommendedProducts:null,onFinish:null,onCancel:null})}()},z65X:function(t,e){!function(){"use strict";PF.ProductAlternatives.Picker.ProductAlternative=Class({__construct:function(t,e,o,r){if(this.node=mkE({tag:"div",style:{position:"relative"},els:[{tag:"img",className:"alternatives-arrows",src:"/static/images/layout/alternatives.svg"}]}),t.productItems.length){for(var s in t.productItems){var a=t.productItems[s];mkE({tag:"div",className:"alternative__product alternative__product--border-bottom alternative__product-replacement margin-bottom-10 padding-bottom-5",style:{position:"relative",paddingLeft:"80px"},els:[{tag:"div",className:"alternative__product-info",style:{padding:0},els:[{tag:"div",className:"alternative__product-image",style:{backgroundImage:"url("+a.urlImage+")",position:"absolute",left:0,top:0}},{tag:"div",className:"margin-bottom-5",style:{fontSize:"16px",fontWeight:"bold"},text:a.title},a.model?{tag:"div",style:{marginBottom:"3px"},text:dlang("dashboard","Model")+": "+a.model}:"",a.brand?{tag:"div",style:{marginBottom:"3px"},text:dlang("dashboard","Brand")+": "+a.brand}:"",{tag:"div",text:dlang("dashboard","Size")+": "+a.sizes.join(" ")},this._renderColorSwatches(t.data[a.productId].colors),this._renderMissingSizes(e,a.productId)]}]}).append(this.node)}this._renderMissingColors(t.missingColorsData),mkE({tag:"a",text:lang("Change"),className:"margin-left-80",onclick:o.bind(this,a)}).append(this.node),mkE({tag:"a",text:lang("Reset"),className:"margin-15",onclick:r}).append(this.node)}else mkE({tag:"a",className:"btn btn-default",text:dlang("products","Set alternative"),onclick:o}).append(this.node)},_renderColorSwatches:function(t){var e=new PF.Components.ColorPicker.Par;return e.colors=this._formatColors(t),e.onChange=function(){},e.isColorClickable=!1,mkE({tag:"div",className:"margin-vertical-5",els:[new PF.Components.ColorPicker(e)]})},_renderMissingSizes:function(t,e){if($.isEmptyObject(t))return mkE({tag:"div"});var o=mkE({tag:"div",text:dlang("products","Missing size and color combinations")}),r=this._getGroupedSizes(t,e),s=this._getGroupedColors(t,r,e);if(0===s.length)return mkE({tag:"div"});for(var a in s){var n=s[a],i=mkE({tag:"div",style:{margin:"3px 0"}});for(var d in n){var l=n[d].color,c=new PF.Components.ColorPicker.Par;c.showInline=!0,c.colors={},c.onChange=function(){},c.isColorClickable=!1;var u=[l.colorCode];l.colorCode2&&u.push(l.colorCode2),c.colors[l.colorName]=u,new PF.Components.ColorPicker(c).append(i)}mkE({tag:"span",className:"margin-left-5",text:r[a].reverse().join(", ")}).append(i),i.append(o)}return o},_getGroupedSizes:function(t,e){var o=[];for(var r in t)if(t[r].productId===e){var s=!1;for(var a in o){var n=o[a];this._arraysMatch(n,t[r].sizes)&&(s=!0)}s||o.push(t[r].sizes)}return o},_getGroupedColors:function(t,e,o){var r=[];for(var s in t)if(t[s].productId===o)for(var a in e){var n=e[a];this._arraysMatch(n,t[s].sizes)&&(a in r?r[a].push(t[s]):r[a]=[t[s]])}return r},_arraysMatch:function(t,e){return t.length===e.length&&JSON.stringify(t.sort())===JSON.stringify(e.sort())},_renderMissingColors:function(t){if(!$.isEmptyObject(t)){var e=mkE({tag:"div",className:"margin-bottom-10 margin-left-80 alternative__product-info",text:dlang("products","No alternatives set for"),style:{padding:0}}),o=new PF.Components.ColorPicker.Par;o.colors=this._formatColors(t),o.onChange=function(){},o.isColorClickable=!1,new PF.Components.ColorPicker(o).append(e),e.append(this.node)}},_formatColors:function(t){var e={};for(var o in t){var r=t[o];if(r.colorCode){var s=[r.colorCode.toUpperCase()];r.colorCode2&&s.push(r.colorCode2.toUpperCase()),e[r.colorName]=s}}return e}},mkE.Base)}()}},[[28,0]]]);