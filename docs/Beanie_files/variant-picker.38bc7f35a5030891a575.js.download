(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{"/rCP":function(e,i){!function(){"use strict";PF.VariantPicker.Memory=Class({__NAME:"PF.VariantPicker.Memory",_storage:null,_availableStorageKeys:[],__construct:function(){this._storage=PF.VariantPicker.Memory._staticStorage,this._availableStorageKeys=[PF.VariantPicker.Memory.KEY_COLOR,PF.VariantPicker.Memory.KEY_SIZE,PF.VariantPicker.Memory.KEY_REGION,PF.VariantPicker.Memory.KEY_OPTIONS,PF.VariantPicker.Memory.KEY_GENERATOR_DESIGN,PF.VariantPicker.Memory.KEY_DESIGN_DATA]},getSize:function(){return this._get(PF.VariantPicker.Memory.KEY_SIZE)},rememberSize:function(e){return this._set(PF.VariantPicker.Memory.KEY_SIZE,e)},getColor:function(){return this._get(PF.VariantPicker.Memory.KEY_COLOR)},rememberColor:function(e){return this._set(PF.VariantPicker.Memory.KEY_COLOR,e)},getRegion:function(){return this._get(PF.VariantPicker.Memory.KEY_REGION)},rememberRegion:function(e){return this._set(PF.VariantPicker.Memory.KEY_REGION,e)},getOptions:function(){return this._get(PF.VariantPicker.Memory.KEY_OPTIONS)},rememberOptions:function(e){return this._set(PF.VariantPicker.Memory.KEY_OPTIONS,e)},rememberGeneratorDesignId:function(e){this._set(PF.VariantPicker.Memory.KEY_GENERATOR_DESIGN,e)},getGeneratorDesignId:function(){return this._get(PF.VariantPicker.Memory.KEY_GENERATOR_DESIGN)},getDesignData:function(){return this._get(PF.VariantPicker.Memory.KEY_DESIGN_DATA)},rememberDesignData:function(e){return this._set(PF.VariantPicker.Memory.KEY_DESIGN_DATA,e)},rememberItemFile:function(e){e.exists()?(this._storage.fileIdsByType[e.type]=e.fileId,e.position&&(this._storage.positionsByType[e.type]=e.position.getClone())):(delete this._storage.fileIdsByType[e.type],delete this._storage.positionsByType[e.type])},getFileIdForType:function(e){return this._storage.fileIdsByType[e]||0},getPositionsForType:function(e){return this._storage.positionsByType[e]||null},remember:function(e){for(var i in e)this._set(i,e[i])},forget:function(){PF.VariantPicker.Memory._staticStorage=new PF.VariantPicker.Memory.Storage,this._storage=PF.VariantPicker.Memory._staticStorage},forgetDesignData:function(){PF.VariantPicker.Memory._staticStorage[PF.VariantPicker.Memory.KEY_DESIGN_DATA]=null},get:function(e){return this._get(e)},_get:function(e){return this._isKeyAllowed(e)&&this._storage[e]?this._storage[e]:null},_set:function(e,i){this._isKeyAllowed(e)&&i&&(this._storage[e]=i)},_isKeyAllowed:function(e){return this._availableStorageKeys.indexOf(e)>-1}}),PF.VariantPicker.Memory.KEY_COLOR="color",PF.VariantPicker.Memory.KEY_SIZE="size",PF.VariantPicker.Memory.KEY_REGION="region",PF.VariantPicker.Memory.KEY_OPTIONS="options",PF.VariantPicker.Memory.KEY_DESIGN_DATA="designData",PF.VariantPicker.Memory.KEY_GENERATOR_DESIGN="generatorDesign",PF.VariantPicker.Memory.Storage=function(){this.options={},this.fileIdsByType={},this.positionsByType={}},PF.VariantPicker.Memory.Storage.prototype.color="",PF.VariantPicker.Memory.Storage.prototype.size="",PF.VariantPicker.Memory.Storage.prototype.region="",PF.VariantPicker.Memory.Storage.prototype.options=null,PF.VariantPicker.Memory.Storage.prototype.fileIdsByType=null,PF.VariantPicker.Memory._staticStorage=new PF.VariantPicker.Memory.Storage}()},22:function(e,i,t){t("Lipf"),t("llTG"),t("Y6pR"),t("KbX1"),t("rFrQ"),t("w7uP"),t("Fghs"),t("/rCP"),t("o0zJ"),t("oTrQ"),t("WLCh"),t("2BaQ"),t("bGr9"),t("83UL"),t("7pSD"),t("ZPm7"),t("oixo"),t("4Ru2"),t("L8zU"),t("HmCv"),t("Kggb"),e.exports=t("4Vs6")},"2BaQ":function(e,i){!function(){"use strict";PF.VariantPicker.SampleVariantAvailability=Class({_variants:[],_availableVariantIds:[],__construct:function(e,i){this._availableVariantIds=e,this._variants=i},getUnavailableSampleSizes:function(){var e=[];if(0===this._availableVariantIds.length)return e;for(var i in this._variants)this._availableVariantIds.indexOf(this._variants[i].variantId)>-1||e.push(this._variants[i].size);return e},isAvailableVariant:function(e){return 0===this._availableVariantIds.length||this._availableVariantIds.indexOf(e.variantId)>-1}}),PF.VariantPicker.SampleVariantAvailability.isAvailableSyncVariant=function(e,i,t){return!t||i!==PF.Items.VariantItem.ID_CUSTOM_PRODUCT&&(0===e.length||e.indexOf(i)>-1)},PF.VariantPicker.SampleVariantAvailability.containsDisallowedVariants=function(e,i){var t=e.product.availableSampleVariants;if(0===t.length)return!1;var r=i.variantMapping,n=e.sizes,s=[];for(var a in r)n.indexOf(r[a].size)>-1&&s.push(r[a].variantId);for(var o in s)if(!(t.indexOf(s[o])>-1))return!0;return!1},PF.VariantPicker.SampleVariantAvailability.canBeSampleOrder=function(e){return e.generatorVariants.length<=PF.Customer.sampleItems||PF.Customer.sampleOrdersTotal<=0}}()},"4Ru2":function(e,i){!function(){"use strict";PF.VariantPicker.RegionPicker=Class({__NAME:"PF.VariantPicker.RegionPicker",_regionPicked:"",DEFAULT_REGION:"USA",__construct:function(e,i,t){i=PF.VariantPicker.VariantRegions.getFilteredAvailableRegions(i),this._regions=i,this._variants=e,this._onRegionChangedCallback=t;var r=new PF.Components.RegionPicker.Par;r.regionData=this._regions,r.onChanged=this._onRegionClick,this.regionPicker=new PF.Components.RegionPicker(r),this.node=mkE({tag:"div"}),this.regionPicker._picker.append(this.node);var n=new Url;n.query.region&&this._regions.availableRegions.indexOf(n.query.region)>-1&&this.setActiveRegion(n.query.region);var s=this.regionPicker.getFirstActiveItem();n.query.isEuropeDefaultFilter&&(this._regions.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE)>-1&&(s=PF.VariantPicker.RegionPicker.REGION_EUROPE),delete n.query.isEuropeDefaultFilter,history.replaceState("",document.title,n.toString())),this._regionPicked=this._getInitialRegion(s),this.regionPicker.setActiveValue(this._regionPicked)},_onRegionClick:function(e){this.regionPicker.getInactiveItems().indexOf(e)>-1&&(e=this.DEFAULT_REGION),this._regionPicked=e,(new PF.Repositories.Products).setLastActiveRegion(e),-1===this.regionPicker.getInactiveItems().indexOf(this.regionPicker.getActiveValue())&&this._onRegionChangedCallback(e)},setActiveRegion:function(e,i){this.regionPicker.isVariantAvailableInRegion(i,e)||(e=this.DEFAULT_REGION),-1===this.regionPicker.getActiveItems().indexOf(e)&&(e=this.regionPicker.getFirstActiveItem()),this.regionPicker.setActiveValue(e),this._regionPicked=e},getValueCount:function(){return 1},isValuePicked:function(){return!!this.getRegion()},getRegion:function(){return this._regionPicked},getMatchingVariants:function(){if(!this._regionPicked)return this._variants;for(var e=[],i=0;i<this._variants.length;i++){var t=this._variants[i];this.regionPicker.isVariantAvailableInRegion(t.variantId,this._regionPicked)&&e.push(t)}return e&&e.sort(PF.Utils.Product.variantSortingBySizeCallback),e||[]},getAllVariants:function(){return this._variants.slice()},_getInitialRegion:function(e){var i=null;try{i=localStorage&&localStorage.getItem("europeLandingRegion"),localStorage&&localStorage.removeItem("europeLandingRegion")}catch(e){}return PF.Customer.isAnonymous()&&!i&&PF.Customer.location&&(PF.Customer.location.region==PF.VariantPicker.RegionPicker.REGION_EUROPE.toLowerCase()||this._isEuropePrimaryFulfillment())&&-1==this.regionPicker.getInactiveItems().indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE)&&-1!==this._regions.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE)?PF.VariantPicker.RegionPicker.REGION_EUROPE:e&&!i||-1===this._regions.availableRegions.indexOf(i)?e:i||this.DEFAULT_REGION},_isEuropePrimaryFulfillment:function(){return["AM","AZ","BH","CN","GE","HK","ID","IN","IL","JP","JO","KZ","KW","KG","LB","MO","MY","MN","OM","PK","PH","SA","SG","LK","TW","TJ","TH","TR","TM","AE","UZ","VN","YE","QA","AI","AG","AR","BR","CL","CO","DM","GL","JM","PY","PE","SR","UY","VE","BJ","BW","CM","CV","CD","EG","ER","GH","KE","ML","MU","MA","MZ","NA","NG","SC","ZA","TZ","TN","KR"].indexOf(PF.Customer.location.country)>-1}},PF.VariantPicker.BasePicker),PF.VariantPicker.RegionPicker.REGION_EUROPE="Europe",PF.VariantPicker.RegionPicker.REGION_USA="USA",PF.VariantPicker.RegionPicker.REGION_JAPAN="Japan",PF.VariantPicker.RegionPicker.REGION_USA_AND_EUROPE="USA and Europe",PF.VariantPicker.RegionPicker.REGION_USA_EUROPE_MEXICO="USA, Europe, Mexico",PF.VariantPicker.RegionPicker.REGION_MEXICO="Mexico",PF.VariantPicker.RegionPicker.REGION_EUROPE_MEXICO="Europe and Mexico"}()},"4Vs6":function(e,i,t){"use strict";function r(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}t.r(i),t.d(i,"TechniquePickerPar",(function(){return n}));var n=function e(){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"techniques",[]),r(this,"activeValue",""),r(this,"callback",null),r(this,"isGenerator",!1),r(this,"productId",0)}},"7pSD":function(e,i){!function(){"use strict";PF.VariantPicker.BasePicker=Class({_afterShow:null,nodeError:null,_isVisible:!1,_disabledRegionValueVariants:{},regionData:{},currentDisabledVariants:{},updateErrorStatus:function(e){return e&&(this.nodeError.innerText=e),!(this.nodeError&&!mkE.hasClassName(this.node,"hidden"))||(this.isValuePicked()?(mkE.addClassName(this.nodeError,"hidden"),!0):(mkE.removeClassName(this.nodeError,"hidden"),!1))},hideError:function(){mkE.addClassName(this.nodeError,"hidden")},showError:function(){mkE.removeClassName(this.nodeError,"hidden")},hasAtLeastOneValue:function(){return!0},isValuePicked:function(){},getValueCount:function(){},showPicker:function(){mkE.removeClassName(this.node,"hidden"),mkE.addClassName(this.node,"picker-animation--hidden"),this._isVisible=!0,setTimeout(function(){mkE.addClassName(this.node,"picker-animation"),mkE.removeClassName(this.node,"picker-animation--hidden")}.bind(this),10),setTimeout(this._afterShow,400)},hidePicker:function(){this._isVisible=!1,mkE.addClassName(this.node,"hidden")},isVisible:function(){return this._isVisible},_setAfterShow:function(e){this._afterShow=e},getVariantClicked:function(e,i){return this.currentDisabledVariants.filter((function(t){return t[i]===e}))},getAvailableAttributeRegion:function(e,i,t,r){var n=this.getVariantClicked(e,i);if(t&&r&&n.length>1){var s=this.getVariantClicked(t,r);n=n.filter((function(e){return s.indexOf(e)>-1}))}var a=this.regionData.variantsByRegion,o=Object.entries(a),l=[];return o.forEach((function(e){var i=e[0],t=e[1];n.forEach((function(e){t.indexOf(e.variantId)>-1&&l.push(PF.VariantPicker.BasePicker.translateRegion(i))}),this)}),this),(l=l.filter((function(e,i){return l.indexOf(e)===i}))).join(", ")},_filterValues:function(e,i){return e.filter((function(e){return null!==e[i]}))},__compare:function(e){return function(i){return 0==e.filter((function(e){return e&&e.variantId==i.variantId})).length}},setSelectedRegionDisabledValues:function(e,i,t,r){if(r&&(this.regionData=r),e&&i&&t){this.currentDisabledVariants=i.filter(this.__compare(e)),i=this._filterValues(i,t),e=this._filterValues(e,t);var n=i.filter((function(i){return!e.some((function(e){return i[t]==e[t]}))})),s=e.filter((function(e){return!i.some((function(i){return e[t]==i[t]}))})),a=n.concat(s),o={},l={};a.forEach((function(e){o[e[t]]||(l[e[t]]=e.availability,o[e[t]]=!0)})),this._disabledRegionValueVariants[t]=l}},getSelectedRegionDisabledValues:function(e){return Object.keys(this._disabledRegionValueVariants[e])},scrollToNodeError:function(){if(this.nodeError){var e=$(this.nodeError).closest(".modal-content").get(0);e||(e=document.documentElement||document.body);var i=this.nodeError.getBoundingClientRect().top+e.scrollTop,t=window.innerHeight/2,r=this.nodeError.offsetHeight/2;$(e).animate({scrollTop:i-t+r},200)}}},mkE.Base),PF.VariantPicker.BasePicker.USA="USA",PF.VariantPicker.BasePicker.MX="Mexico",PF.VariantPicker.BasePicker.EU="Europe",PF.VariantPicker.BasePicker.JP="Japan",PF.VariantPicker.BasePicker.translateRegion=function(e){switch(e){case PF.VariantPicker.BasePicker.USA:return dlang("dashboard","USA");case PF.VariantPicker.BasePicker.EU:return dlang("dashboard","Europe");case PF.VariantPicker.BasePicker.MX:return lang("Mexico");case PF.VariantPicker.BasePicker.JP:return lang("Japan");default:return e}}}()},"83UL":function(e,i){!function(){"use strict";PF.VariantPicker.VariantRegions=Class({availableRegions:[],selectedRegions:[],variantsByRegion:{},getRegionsForVariant:function(e){e=parseInt(e,10);var i=[];for(var t in this.variantsByRegion)this.variantsByRegion[t].indexOf(e)>-1&&("USA and Europe"===t&&1!=Object.keys(this.variantsByRegion).length||i.push(t));return i}},mkE.Base),PF.VariantPicker.VariantRegions.getFilteredAvailableRegions=function(e){var i,t,r,n,s,a,o;return e.availableRegions=e.availableRegions.slice(),i=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_EUROPE].sort().toString(),t=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_USA].sort().toString(),r=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_USA_AND_EUROPE].sort().toString(),n=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_MEXICO].sort().toString(),s=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_JAPAN].sort().toString(),a=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_USA_EUROPE_MEXICO].sort().toString(),o=e.variantsByRegion[PF.VariantPicker.RegionPicker.REGION_EUROPE_MEXICO].sort().toString(),e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_MEXICO),1),n||(e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_USA_EUROPE_MEXICO),1),e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE_MEXICO),1)),s||e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_JAPAN),1),i==t&&t==r&&i==r&&(e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE),1),e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_USA),1),a==r&&e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_USA_AND_EUROPE),1)),n&&i&&n==i&&i==o&&e.availableRegions.splice(e.availableRegions.indexOf(PF.VariantPicker.RegionPicker.REGION_EUROPE),1),e}}()},Fghs:function(e,i){!function(){"use strict";PF.VariantPicker.Designer.Par=Class({store:null,product:null,itemFiles:null,isProductPushMode:!1,pickerConfig:null,isDesignerSupported:!0,generatorDesignId:null,orderLineItem:null,isModalDesigner:!1,enableCustomizableLayers:!1,productTemplateEditorState:null,generatorParameters:null,onLoaderToggle:null,onProductLoaded:null})}()},HmCv:function(e,i){!function(){"use strict";PF.VariantPicker.TechniquePicker=Class({__NAME:"PF.VariantPicker.TechniquePicker",_showWarningPopup:!1,_isPopupBusy:!1,__construct:function(e){this._par=e,this.node=tag("div","row no-gutters"),this._render()},_render:function(){mkE.clearNode(this.node),tag("div","col-12",[tag("div","row pf-my-8",[tag("div","col-6",[tag("h6","pf-h5 pf-m-0",[lang("Choose technique"),this._getTagNew(this._par.techniques)])]),tag("div","col-6 "+(this._par.isGenerator?"pf-d-none":"pf-d-inline-block"),[tag("a",{className:"pf-link pf-m-0 float-right",onclick:this._scrollToGuidelines.bind(this),id:"fileGuidelinesButton"},dlang("products","File guidelines"))])]),tag("div","row pf-d-flex technique-picker pf-p-0 pf-mb-24 text-center",[tag("div","col-12 pf-d-flex",[this._par.techniques.map(this._renderItem)])])]).append(this.node)},_renderItem:function(e){return tag("a",{className:"pf-btn pf-btn-outline pf-width-max pf-mr-4 "+(this._isActive(e.type)?"active ":""),onclick:this._onTechniquePicked.bind(this,e.type)},e.label)},_getTagNew:function(e){var i=PF.Items.ProductItem.FILTER_CENTERED_EMBROIDERY.includes(this._par.productId),t="";return e.map((function(e){return e.type})).includes(PF.Items.ProductItem.TYPE_EMBROIDERY)&&i&&(t=tag("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary pf-text-white",lang("New"))),t},_isActive:function(e){return this._par.activeValue===e},_onTechniquePicked:function(e){e!==this._par.activeValue&&(this._showWarningPopup?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new PF.VariantPicker.TechniquePicker.Popup(this._onTechniquePickedRe.bind(this,e))):this._onTechniquePickedRe(e))},_onTechniquePickedRe:function(e){this._isPopupBusy=!1,this._par.activeValue=e,this._render(),this._par.callback&&this._par.callback(e)},toggleChangeTechniquePopup:function(e){this._showWarningPopup=e},_scrollToGuidelines:function(){$("html, body").animate({scrollTop:$(".catalog__product__tabs .pf-tabs").offset().top-50},1e3),$(".catalog__product__tabs li:eq(1) a").trigger("click")}},PF.VariantPicker.BasePicker)}()},KbX1:function(e,i){!function(){"use strict";PF.VariantPicker.ProductImage=Class({__NAME:"PF.VariantPicker.ProductImage",_lastUrl:"",_currentUrl:"",__construct:function(e){this.node=mkE({tag:"div",style:{textAlign:"right"},els:[this._nodeWrap=mkE({tag:"div",style:{display:"inline-block",width:"auto",minWidth:"100px"}})]}),this.setImage(e)},setImage:function(e){if(e){if(e!=this._currentUrl){PF.LoadingOverlay.show(this._nodeWrap,{minHeight:200}),this._lastUrl=e;var i=new Image;i.onload=$.proxy(this._onLoaded,this,e),i.src=e}}else this._clear()},_onLoaded:function(e){e===this._lastUrl&&(this._clear(),this._currentUrl=e,mkE({tag:"img",src:e,className:"img-responsive pull-right"}).append(this._nodeWrap))},_clear:function(){PF.LoadingOverlay.hide(this._nodeWrap),mkE.clearNode(this._nodeWrap),this._lastUrl=""}},mkE.Base)}()},Kggb:function(e,i){!function(){"use strict";PF.VariantPicker.TechniquePicker.Popup=Class({callback:null,__construct:function(e){this.callback=e,this._render()},_render:function(){var e=new PF.Modal.Par;e.modalDialogClass="modal-md",e.useScrollableModal=!0,this._modal=new PF.Modal(e),this._modal.setHeaderContent("");var i=tag("div","",[tag("div","warning-text",[tag("h4","",lang("Are you sure?")),tag("p","",lang("None of your changes will be saved. Are you sure you want to continue switching techniques?"))])]);this._modal.setContent(i);var t=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"btn btn-danger pf-mr-16",onclick:this._callback},lang("Yes, continue")),tag("a",{className:"btn btn-default",onclick:function(){this._modal.remove()}.bind(this)},lang("No, go back"))]);this._modal.setFooterContent(t),this._modal.show()},_callback:function(){this._modal.remove(),this.callback()}})}()},L8zU:function(e,i){!function(){"use strict";PF.VariantPicker.SizePicker=Class({__NAME:"PF.VariantPicker.SizePicker",_sizes:[],_unavailableSizes:[],_variants:[],POPOVER_REGION_TITLE:dlang("site","Fulfilled in {region}"),POPOVER_REGION_DESCRIPTION:lang("Ships to locations worldwide"),POPOVER_SAMPLE_TITLE:lang("Not available as sample"),POPOVER_SAMPLE_DESCRIPTION:lang("You can place it as a basic order"),ONE_SIZE:"One Size",ONE_SIZE_TRANSLATED:dlang("products","One Size"),nodeError:null,sizeGuideModal:null,_marginClass:"margin-bottom-30",_shouldDisplayInline:!0,__construct:function(e,i,t,r){this._onSizeChangedCallback=i,this._sizes=this._getUniqueSizes(e),this._variants=e,this._shouldDisplayInline=void 0===r||r;var n=[];for(var s in this._sizes){var a=this._sizes[s],o=a===this.ONE_SIZE?this.ONE_SIZE_TRANSLATED:a;n.push({value:a,title:o})}var l=new PF.Components.ButtonPicker.Par;if(l.values=n,l.valuesDisabled=this._unavailableSizes,l.onChanged=this._onSizeClick,this.buttonPicker=new PF.Components.ButtonPicker(l),t&&(this._marginClass=t),this._sizes.length){var c=new Url;if(c.query.size&&this._sizes.indexOf(c.query.size)>-1&&this.buttonPicker.setActiveValue(c.query.size),1===this._sizes.length)for(var h in e){this._variant=e[h],this.buttonPicker.setActiveValue(this._variant.size);break}this.node=tag("div",{className:this._marginClass+" button-picker",style:this._shouldDisplayInline?{display:"inline-block"}:{}},[tag("div","pf-mb-8",[tag("b","",[lang("Choose size")]),this._canHaveSizeGuide()?tag("a",{className:"pull-right pf-mr-4 pf-ml-32 pf-link",onclick:this._showSizeGuide},[lang("Size guide")]):""]),this.buttonPicker._nodeItems,this.nodeError=tag("div","alert alert-danger text-center hidden pf-mt-16",dlang("products","Please choose a size!"))])}else this.node=tag("div")},_showSizeGuide:function(){if(null==this.sizeGuideModal){var e=new PF.Modal.Par;for(var i in e.title=lang("Size guide"),e.modalDialogClass="modal-lg",e.onClose=$.proxy(this._removeSizeGuide,this),e.useScrollableModal=!0,this._variants){e.url=PF.Items.ProductItem.getSizeChartUrl(this._variants[i].productId);break}this.sizeGuideModal=new PF.Modal(e)}this.sizeGuideModal.show()},_removeSizeGuide:function(){this.sizeGuideModal&&(this.sizeGuideModal.remove(),this.sizeGuideModal=null)},_canHaveSizeGuide:function(){for(var e in this._variants)return this._variants[e].getCachedProduct().canHaveSizeGuide;return!1},_onSizeClick:function(e){this.buttonPicker.getDisabledSampleSizes().indexOf(e)>-1?this.buttonPicker.togglePopover(e,this.POPOVER_SAMPLE_TITLE,this.POPOVER_SAMPLE_DESCRIPTION):(this._onSizeChangedCallback(e),this.buttonPicker.getInactiveItems().indexOf(e)>-1&&this.renderPopover(e),this.buttonPicker.setActiveValue(e))},getSize:function(){return this.buttonPicker?this.buttonPicker.getValue():null},_getUniqueSizes:function(e){var i=[];for(var t in e){var r=e[t].size;r&&i.indexOf(r)<0&&(!e[t].isDisabledInPush||e[t].hasStock)&&i.push(r)}return i.sort(PF.Utils.Product.sizeSortingCallback)},setUnavailableSizes:function(e){this.buttonPicker&&this.buttonPicker.setUnavailableItems(e)},setHiddenSizes:function(e){this.buttonPicker&&this.buttonPicker.setHiddenItems(e)},setInactiveSizes:function(e){this.buttonPicker&&this.buttonPicker.setInactiveItems(e)},setUnavailableSampleSizes:function(e){this.buttonPicker&&this.buttonPicker.setDisabledSampleSizes(e)},setVariant:function(e){if(this.buttonPicker.setActiveValue(""),e&&e.size&&this._sizes.indexOf(e.size)>-1&&(this.buttonPicker.setActiveValue(e.size),this._variant=e),!this.buttonPicker.getActiveValue()&&1==this._sizes.length)for(var i in this._variants){this._variant=this._variants[i],this.buttonPicker.setActiveValue(this._variant.size);break}},getVariant:function(){return this._variant},hasAtLeastOneValue:function(){return!!this._sizes.length},isValuePicked:function(){return!!this.getSize()},getValueCount:function(){return this._sizes.length},getSizes:function(){return this._sizes.slice()},renderPopover:function(e){PF.VariantPicker.SizePicker.SIZES_WITHOUT_REGION_POPOVER.indexOf(e)>-1||this.buttonPicker.togglePopover(e,this.POPOVER_REGION_TITLE.replace("{region}",this.getAvailableAttributeRegion(e,"size")),this.POPOVER_REGION_DESCRIPTION)}},PF.VariantPicker.BasePicker),PF.VariantPicker.SizePicker.SIZES_WITHOUT_REGION_POPOVER=["Samsung Galaxy S10","Samsung Galaxy S10e","Samsung Galaxy S10+"]}()},Lipf:function(e,i){!function(){"use strict";PF.VariantPicker=Class({__NAME:"PF.VariantPicker",_product:null,_variant:null,_variants:[],_orderLineItem:null,_itemFiles:null,_onVariantPickedCallback:null,_onVariantPickedButGeneratingCallback:null,_par:null,_isDesignerSupported:!1,_designer:null,_memory:null,_isSync:!1,_isSampleOrder:!1,_initLoad:!0,_allAvailablePlacements:[],_isShoppingCart:!1,__construct:function(e){this._par=e,this._isSync=e.isVariantSyncFlow,this._isSampleOrder=e.isSampleOrder,this._isShoppingCart=e.isShoppingCart,this._onGeneratorDesignIdChanged=e.onGeneratorDesignIdChanged,this._memory=new PF.VariantPicker.Memory,this._memory.forgetDesignData(),e.skipMemory&&this._memory.forget(),this._productRepository=new PF.Repositories.Products,this._productRepository.setCurrency(e.currency),this._productRepository.setStoreId(e.storeId),this._orderLineItem=e.orderLineItem,this._onVariantPickedCallback=e.callback,this._onVariantPickedButGeneratingCallback=e.callbackWithGeneratingFiles,this.node=tag("div","variant-picker"),this._showLoader({minHeight:400}),this._generatorRepository=new PF.Repositories.GeneratorRepository;var i=this._par.productId||this._orderLineItem.productId,t=this._par.productId!==this._orderLineItem.productId;this._generatorRepository.loadGeneratorProduct({productId:i,flow:this._par.flow,currency:this._par.currency,storeId:this._par.storeId,generatorDesignId:this._orderLineItem.designId?this._orderLineItem.designId:this._memory.getGeneratorDesignId(),isProductPushMode:this._isSync,isOrderFlowMode:!0,productTemplateEditorState:this._par.productTemplateEditorState,technique:t?PF.Utils.TechniqueMemory(i).getTechniqueFromMemory():this._orderLineItem.technique||null,variantCallback:this._onVariantsLoaded,hasExtraGeneratorVariants:!1})},_showLoader:function(e){this._par.onLoaderToggle?this._par.onLoaderToggle(this.node,e,!0):PF.LoadingOverlay.show(this.node,e)},_hideLoader:function(){this._par.onLoaderToggle?this._par.onLoaderToggle(this.node,null,!1):PF.LoadingOverlay.hide(this.node)},_render:function(){this._hideLoader(),mkE.clearNode(this.node),tag("div","row variant-picker__body",[{tag:"div",className:"col-md-12",els:[this._designer=this._getDesigner()]}]).append(this.node),this._designer.setFileTypesWithFiles(this._itemFiles.map((function(e){return e.exists()?e.type:null})).filter((function(e){return!!e}))),this._initFooter(),this._setActiveVariant()},_getDesigner:function(){var e=new PF.VariantPicker.Designer.Par;e.store=PF.Items.StoreItem.fromArray({storeId:this._par.storeId}),e.product=this._product,e.itemFiles=this._itemFiles,e.isProductPushMode=this._isSync,e.generatorDesignId=this._orderLineItem.designId,e.orderLineItem=this._orderLineItem,e.enableCustomizableLayers=this._par.enableCustomizableLayers,e.pickerConfig=this._getPickersConfig(),e.isDesignerSupported=this._isDesignerSupported,e.isModalDesigner=this._par.isModalDesigner,e.productTemplateEditorState=this._par.productTemplateEditorState,e.generatorParameters=this._par.generatorParameters,e.onLoaderToggle=this._par.onLoaderToggle,e.onProductLoaded=this._par.onProductLoaded,this._shouldUseExistingDesign()&&(e.generatorDesignId=this._orderLineItem.designId?this._orderLineItem.designId:this._memory.getGeneratorDesignId());var i=new PF.VariantPicker.Designer(e);return i.registerParentNode(this.node).getObserver().onDesignerReady(this._onDesignerReady).onRegionChanged(this._onRegionChanged).onMockupReady(this._onVariantChanged).onMockupReady(this._onPositionsChanged).onAfterSizesChanged(this._onSizeChanged).onAfterColorsChanged(this._onColorChanged).onProductOptionsChanged(this._onProductOptionsChanged).onPlacementPositionsChanged(PF.Utils.Delayer.delay.bind(this,"layerPositionsChanged",this._onPositionsChanged)).onPlacementLayersChanged(this._onLayersChanged).onEmbroideryNotesChanged(this._updateErrors).onDesignFillColorChanged(this._onDesignFillColorChanged),i},_initFooter:function(){this._footer=new PF.VariantPicker.Footer(this._par,this._onContinueClicked),"function"==typeof this._par.stickyButtonNodeUpdate&&this._par.stickyButtonNodeUpdate(this._footer)||this._footer.append(this.node)},getFooterHtml:function(){return this._footer&&this._footer.node},getPushDesigner:function(){return this._designer.getPushDesigner()},_getPickersConfig:function(){return(new PF.VariantPicker.PickersConfig).setSizeConfig(new PF.VariantPicker.PickersConfig.ConfigBlueprint(1,this._getValueFromMemoryOrVariant("size"),!0)).setColorConfig(new PF.VariantPicker.PickersConfig.ConfigBlueprint(1,this._getValueFromMemoryOrVariant("color"),!0)).setOptionsValues(this._getProductOptionsValues()).setPlacementPrices(this._getPricesCollection()).setSampleOrderStatus(this._isSampleOrder).setFileTags(this._getFileGroups(),this._fileTags).setActiveRegion(this._productRepository.getLastActiveRegion()||this._memory.getRegion())},_getFileGroups:function(){var e={};return this._itemFiles.forEach((function(i){e[i.type]=i.group}),this),e},_getProductOptionsValues:function(){var e={};return mkE.O2O(e,this._orderLineItem.options),e},_getPricesCollection:function(){var e=new PF.VariantPicker.PricesCollection;return this._itemFiles.forEach((function(i){e.add(i.price,this._getPlacementTechnique(i.type),i.type,i.discountedPrice)}),this),e},_getPlacementTechnique:function(e){if(!this._allAvailablePlacements.length)return this._product.type;var i=this._allAvailablePlacements.filter((function(i){return i.id===e})).slice().shift();return i?i.technique:this._product.type},_onVariantsLoaded:function(e,i,t,r,n){this._product=e,this._variants=i,this._itemFiles=t,this._variantAvailabilty=new PF.VariantPicker.VariantAvailability(i),this._sampleVariantAvailability=new PF.VariantPicker.SampleVariantAvailability(e.availableSampleVariants,i),this._isDesignerSupported=n.isGeneratorAvailable,this._allAvailablePlacements=r,this._priceCalculator=new PF.VariantPicker.PriceCalculator(this._product,this._getPricesCollection()),this._fileTags=n.fileTags,this._memory.rememberOptions(this._orderLineItem.options),this._productRepository.setLastActiveRegion(n.regions.selectedRegions[0]),this._mapItemFiles(),this._render()},_mapItemFiles:function(){var e=!this._orderLineItem.hasAnyFile(),i=this._orderLineItem.getProduct();if(this._hasSameValues(this._product.categoryIds,i.categoryIds))for(var t in this._itemFiles){var r=this._itemFiles[t],n=this._orderLineItem.itemFiles;if(!this._willConflictWithExistingFiles(r.type))if(n&&0!==n.length)for(var s in n){var a=n[s];a.type===r.type&&(e?(r.fileId=this._memory.getFileIdForType(r.type),r.position=this._memory.getPositionsForType(r.type)):(r.fileId=a.fileId,r.position=a.position))}else r.fileId=this._memory.getFileIdForType(r.type),r.position=this._memory.getPositionsForType(r.type)}},_willConflictWithExistingFiles:function(e){for(var i in this._itemFiles)if(this._itemFiles[i].willConflictWith(e))return!0;return!1},_onDesignerReady:function(){this._designer.isReady=!0,this._initLoad&&this._orderLineItem.hasPrintFiles()&&this._memory.rememberDesignData(this._designer.getDesignData().toArray()),this._onRegionChanged(),this._addDetails(),this._par.activePlacementId&&this.getPushDesigner().setActivePlacement(this._par.activePlacementId),this._updatePlacementPrices(),this._initLoad=!1,this._par.onDesignerLoaded&&this._par.onDesignerLoaded()},_onSizeChanged:function(){this._detailedSizePicker&&mkE.removeNode(this._detailedSizePicker),this._updateColorsState()._onVariantChanged()},_onColorChanged:function(){this._updateSizesState()._onVariantChanged()},_onRegionChanged:function(){return this._updateColorsState()._updateSizesState()._onVariantChanged(),(new PF.Repositories.Products).setLastActiveRegion(this._designer.getRegion()),!1},_onProductOptionsChanged:function(){this._designer.getLayerPicker().checkProductOptionsStatus();var e=this._designer.getProductOptionsPicker();e.isValuePicked()&&e.updateErrorStatus(),this._onSomethingChanged()},_updateColorsState:function(){if(!this._designer.getColorPicker())return this;var e=this._mapColorsFromVariants();return this._designer.getColorPicker().setUnavailableColors(e.unavailable).setDiscontinuedColors(e.discontinued).setDisabledRegionColors(e.regionDisabled).selectAtLeastOneColorAndRender(),this},_updateSizesState:function(){if(!this._designer.getSizePicker())return this;var e=this._mapSizesFromVariants();return this._product.isInCatalogCategory(56)&&this._designer.getSizePicker().setHiddenSizes(e.unavailable),this._designer.getSizePicker().setUnavailableSizes(e.unavailable).setUnavailableSampleSizes(e.unavailableSample).setInactiveSizes(e.inactive).render(),this},_getSelectedRegionDisabledValues:function(e){var i={color:this._designer.getColor(),size:this._designer.getSize()},t="size"===e?"color":"size",r=this._getSelectedRegionVariants().filter((function(e){return!i[t]||i[t]===e[t]})),n=this._variants,s=n.filter((function(i){return!r.some((function(t){return i[e]===t[e]}))})),a=r.filter((function(i){return!n.some((function(t){return i[e]===t[e]}))})),o=s.concat(a),l={},c=[];return o.forEach((function(i){l[i[e]]||(c.push(i[e]),l[i[e]]=!0)})),c},_mapColorsFromVariants:function(){var e=this._designer.getSize(),i=this.getPushDesigner().allColors.map((function(e){return e.color}));return{unavailable:this._getColorsUnavailableForSize(e),discontinued:this._variantAvailabilty.getDiscontinuedColors(e).concat(this._variantAvailabilty.getNonExistentColors(e,i)),regionDisabled:this._getSelectedRegionDisabledValues("color")}},_getSelectedRegionVariants:function(){var e=this.getPushDesigner().getSelectedRegionVariants();return e.length||this._isDesignerSupported?e:this._variants},_mapSizesFromVariants:function(){var e=this._isSampleOrder?this._sampleVariantAvailability.getUnavailableSampleSizes():[],i=this._isSelectedColorInactive()?this._variants.filter((function(e){return e.color===this._designer.getColor()}),this).map((function(e){return e.size}),this):[],t=this._getInactiveColorDisabledSizes(),r=this._getSelectedRegionDisabledValues("size"),n=r.filter((function(e){return-1!==t.indexOf(e)}));return{unavailable:this._getSizesUnavailableForColor(),unavailableSample:e,inactive:[].concat(n.length?n:r,e,i)}},_getFirstMatchingVariant:function(){var e=this._designer.getColor(),i=this._designer.getSize(),t=this._getSelectedRegionVariants();for(var r in t){var n=t[r];if(!n.size&&!i&&e&&n.color===e)return n;if(!n.color&&!e&&i&&n.size===i)return n;if(n.size===i&&n.color===e)return n;if(!(n.size||i||n.color||e))return n;if(!i&&e&&n.color===e)return n}return null},_onVariantChanged:function(){this._setActiveVariant(),this._onSomethingChanged()},_isSelectedColorInactive:function(){return!!this._getColorsUnavailableForSize().filter(function(e){return e===this._designer.getColor()}.bind(this)).length},_getValueFromMemoryOrVariant:function(e){var i=this._getValueFromVariant(e);if(i)return i;var t=this._memory.get(e);return t&&this._hasVariantsWithPropValue(e,t)?t:null},_getValueFromVariant:function(e){if(this._isVariantWithinList(this._orderLineItem.variantId)){var i=this._orderLineItem.getVariant();return i[e]?i[e]:""}return""},_hasVariantsWithPropValue:function(e,i){return this._variants.filter((function(t){return t[e]&&t[e]===i})).length>0},_isVariantWithinList:function(e){return this._variants.filter((function(i){return i.variantId===e})).length>0},_onLayersChanged:function(){var e=this._getUpdatedItemFiles().filter((function(e){return e.exists()})).map((function(e){return e.type}));this._designer.setFileTypesWithFiles(e),this._designer.getLayerPicker().updateErrorStatus(),this._onSomethingChanged(),this._onPositionsChanged()},_onDesignFillColorChanged:function(e){e&&this._footer.disableContinue(),this._updateFooter()},_onSomethingChanged:function(){this._updatePlacementPrices(),this._updateFooter(),this._memory.remember(this.getPushDesigner().getValuesToRemember())},_updatePlacementPrices:function(){if(this._designer.isReady){var e=this.getPushDesigner();this._priceCalculator.updatePlacementPrices(this._getPricesCollection()).setAvailablePlacements(e.getAvailablePlacements()).updatePlacementsWithLayers(this._designer.getDesignData().getPlacementIdsWithDesign()),e.updatePlacementPrices(this._priceCalculator.getFormattedPlacementPrices())}},_updateFooter:function(){var e=this;document.body.contains(this._footer.node)?(this._footer.setPrice(this._getPriceInfo()),this._canContinue()?(this._footer.setError(""),this._footer.enableContinue()):this._footer.disableContinue()):setTimeout((function(){e._initFooter(),e._updateFooter()}),200)},_canContinue:function(){return this._getFirstMatchingVariant()&&this._designer.canContinue()&&this._variant&&!this._variantAvailabilty.isVariantDiscontinued(this._variant)&&this._variant&&this._canProceedWithSampleVariant()},_getPriceInfo:function(){var e=this._getFirstMatchingVariant();if(!e)return new PF.Items.PriceItem;var i={};mkE.O2O(i,e.priceData);var t=this._priceCalculator.getTotal(e)+this._designer.getExtraPrice(),r=t-e.priceData.price,n=this._priceCalculator.getTotal(e,!0)+this._designer.getExtraPrice()-e.priceData.discountedPrice;return n>0&&(i.discountType=PF.Items.PriceItem.DISCOUNT_TYPE_CUSTOM),i.price=t,i.originalPrice=e.priceData.originalPrice+r,i.discountedPrice=e.priceData.discountedPrice+n,i.bulkDiscountTiers=this._product.priceRange.bulkDiscountTiers,i},_getColorsUnavailableForSize:function(e){e||(e=this._designer.getSize());var i=[],t=[];for(var r in this._variants){var n=this._variants[r];t.push(n.color),e&&n.size!==e||!n.hasStock||i.push(n.color)}return t.filter((function(e,r){return t.indexOf(e)===r&&i.indexOf(e)<0}))},_getSizesUnavailableForColor:function(){var e=this._product.isInCatalogCategory(56),i=this._designer.getColor();if(!i)return[];var t=this._variantAvailabilty.getUnavailableSizes(i,[].concat(this.getPushDesigner().allSizes)),r=this._variants.filter(function(e){return e.color===this._designer.getColor()}.bind(this)).map((function(e){return e.size}));return this.getPushDesigner().allSizes.filter((function(e){return-1===r.indexOf(e)})).concat(e?[]:t)},_getInactiveColorDisabledSizes:function(){var e=this._getSelectedRegionDisabledValues("color"),i=!1;for(var t in e)e[t]===this._designer.getColor()&&(i=!0);var r=[];if(i)for(var n in this._variants)this._variants[n].color===this._designer.getColor()&&r.push(this._variants[n].size);return r},_onContinueClicked:function(){if(!this._footer.isContinueJsEventDisabled()){if(this._footer.disableContinueJsEvent(),!this._canContinue()||!this._designer.hasValidProductOptions())return this._designer.updateErrors(),this._updateErrors(),void this._footer.enableContinueJsEvent();var e=this.getPushDesigner().getMissingUploadPrintFiles();if(e.length)return new PF.Components.MissingPrintfilesPopup(e,this._continueClickedBody),void this._footer.enableContinueJsEvent();this._continueClickedBody()}},_continueClickedBody:function(){if(this._designer.getPushDesigner().trackTransparencyWarningContinueClick(),this._footer.disableContinue(),this._footer.disableContinueJsEvent(),this._isFileGenerationRequired()){this._orderLineItem.design&&this._orderLineItem.design.forgetSvgItems();var e=this._designer.getFilesTypesToGenerate(!this._isSync);return this._onContinueWithFilesBeingGenerated(e),void this._requestFileGeneration(e)}var i=this._getNativeLabelProcessingParams();i?this._processNativeInsideLabel(i,this._onContinue):this._par.isVariantSyncFlow&&this._hasCustomizerConfigChanged()?this._requestCustomizableUpdate(this._onContinue):this._onContinue()},_isNativeInsideLabel:function(e){return e.isInsideLabel()&&(e.insideLabelTemplate||this._orderLineItem.designData&&this._orderLineItem.designData.hasLabelNative())},_processNativeInsideLabel:function(e,i){(new PF.Repositories.GeneratorRepository).getInsideLabelTemplate(this._variant.variantId,e.nativeInsideLabelItemFileId,this._applyNativeInsideLabel.bind(this,i),e.insideLabelTemplateId,e.position)},_getNativeLabelProcessingParams:function(){var e,i,t,r=this._designer.getDesignData();if(r.labelTemplateType!==PF.Components.InsideLabelTemplate.LABEL_NATIVE)return!1;for(var n in this._itemFiles)if(this._itemFiles[n].isInsideLabel()&&this._itemFiles[n].fileId){if(this._itemFiles[n].insideLabelTemplate)return!1;e=this._itemFiles[n].fileId,t=this._itemFiles[n].position;break}var s=r.generatorVariants;for(var a in s)if(s[a].isInsideLabel()){if(!s[a].templateType===PF.Components.InsideLabelTemplate.LABEL_NATIVE)return!1;i=s[a].templateId}return{nativeInsideLabelItemFileId:e,insideLabelTemplateId:i,position:t}},_applyNativeInsideLabel:function(e,i){if(i)for(var t in this._itemFiles)this._itemFiles[t].type===PF.Items.OrderLineItemFile.TYPE_LABEL_INSIDE&&(this._itemFiles[t].insideLabelTemplate=i);e()},_onContinue:function(){this._applyChangesToLineItem(),this._onVariantPickedCallback(this._orderLineItem,this._par.externalId,!0)},_onContinueAfterFilesDone:function(){this._applyChangesToLineItem(),this._onVariantPickedCallback(this._orderLineItem,this._par.externalId,!1)},_applyChangesToLineItem:function(){var e=this._getFirstMatchingVariant(),i=this._getFilteredItemFiles();for(var t in i)this._memory.rememberItemFile(i[t]);this._orderLineItem.variantId=e.variantId,this._orderLineItem.productId=e.productId,this._orderLineItem.itemFiles=i,this._orderLineItem.options=this._designer.getProductOptions(),this._orderLineItem.designData=this._designer.getDesignData(),this._orderLineItem.technique=this._designer.getTechnique(),this._orderLineItem.shouldCreateNewDesign&&(this._orderLineItem.designId=null,this._orderLineItem.shouldCreateNewDesign=!1);var r=this._getPriceInfo();this._orderLineItem.priceData=r,this._orderLineItem.price=r.price,this._orderLineItem.unavailableInSelectedBranches=!this._isVariantAvailableInSelectedRegions(e.productId,e.variantId),delete this._orderLineItem.fileTypesBeingGenerated},_isVariantAvailableInSelectedRegions:function(e,i){var t=this._productRepository.getCachedProductVariantRegions(e);if(!t)return!0;if(0==t.selectedRegions.length)return!0;for(var r in t.selectedRegions){var n=t.selectedRegions[r];if(t.variantsByRegion[n]&&-1!==t.variantsByRegion[n].indexOf(i))return!0}return!1},_onContinueWithFilesBeingGenerated:function(e){this._applyChangesToLineItem(),this._orderLineItem.fileTypesBeingGenerated=e,this._orderLineItem.isGeneratingFilesFromDesign=!0;var i=PF.Items.GeneratorDesign.fromDesignData(this._designer.getDesignData());this._orderLineItem.design&&!this._orderLineItem.isCopy&&(i.designId=this._orderLineItem.design.designId),this._updateGeneratorDesign(i),this._onVariantPickedButGeneratingCallback&&this._onVariantPickedButGeneratingCallback(this._orderLineItem)},_getUpdatedItemFiles:function(){var e=this._designer.getDesignData().filesIdsByPlacement||[],i=this._designer.getDesignData().getPlacementIdsWithDesign();return this._isSync?this._getUpdatedItemFilesForSync(e,i,this._itemFiles.slice()):this._itemFiles.slice().map(function(t){return-1!==i.indexOf(t.type)||t.isMockup()||this._designer.getPushDesigner().hasDesignFillColor(t.type)?(this._designer.getPushDesigner().hasDesignFillColor(t.type)&&0===t.fileId&&(t.fileId=PF.Items.FileItem.ID_TEMP_GENERATOR_FILE),t.isMockup()||this._isNativeInsideLabel(t)||!this._designer.hasDesignChanged(t.type)||this._isSync?t:this.getPushDesigner().hasDesignForPlacement(t.type)?this.getPushDesigner().isPlacementSimple(t.type)||this._isSync?(e[t.type]&&(t.fileId=e[t.type].slice().shift()),t.position=this._designer.getItemFilePosition(t.type,t.fileId),t):(t.fileId=PF.Items.FileItem.ID_TEMP_GENERATOR_FILE,t.position=null,t):(t.fileId=0,t.position=null,t)):(t.fileId=0,t.position=null,t)}.bind(this))},_getUpdatedItemFilesForSync:function(e,i,t){var r=this._designer.isDesignSimple();return t.map(function(t){var n=e[t.type];if(-1===i.indexOf(t.type)&&!t.isMockup()||!1===this._haveFilesGeneratedSuccessfully&&(!n||!n.length||!r))return t.fileId=0,t.position=null,t;if(!1!==this._haveFilesGeneratedSuccessfully&&(!this.getPushDesigner().isPlacementSimple(t.type)||!n||n.length>1))return t.position=this._designer.getDefaultPlacementPosition(t.type),t;var s=[].concat(n).shift();return t.fileId=s,t.position=this._designer.getItemFilePosition(t.type,s),t}.bind(this))},_getFilteredItemFiles:function(){return this._getUpdatedItemFiles().filter(function(e){return this._isItemFileAvailable(e)}.bind(this))},_isItemFileAvailable:function(e){if(e.isMockup())return!0;var i=this._designer.getTechnique(),t=(this._product.availableTechniques||[]).slice();return this._allAvailablePlacements.filter((function(r){return r.id===e.type&&(r.technique===i||t.indexOf(r.technique)>-1)||(i===PF.Items.ProductItem.TYPE_SCREENPRINT&&r.technique===PF.Items.ProductItem.TYPE_T_SHIRT||r.technique===PF.Items.ProductItem.TECHNIQUE_HANG_TAG)})).length>0},_onPositionsChanged:function(){this._updateErrors()},_updateErrors:function(){if(this._footer.setError(""),this.getPushDesigner().hasLayersPositionError())return this._footer.setError(PF.VariantPicker.Footer.LAYER_OUT_OF_BOUNDS),void this._footer.disableContinue();if(this.getPushDesigner().hasLayersOverlapError())return this._footer.setError(PF.VariantPicker.Footer.LAYERS_OVERLAPPING),void this._footer.disableContinue();if(this.getPushDesigner().hasTextSizeError())return this._footer.setError(PF.VariantPicker.Footer.LAYER_TEXT_TOO_SMALL),void this._footer.disableContinue();if(this.getPushDesigner().hasClipartSizeError())return this._footer.setError(PF.VariantPicker.Footer.LAYER_CLIPART_TOO_SMALL),void this._footer.disableContinue();if(this._designer.hasValidSize()&&this._designer.hasValidColor()){if(!this._updateFooterErrors())return this.getPushDesigner().areTextLayersValid()?this.getPushDesigner().areEmbroideryThreadColorsValid()?this.getPushDesigner().hasEmbroideryNotesError()?(this._footer.setError(PF.VariantPicker.Footer.EMBROIDERY_NOTES_MISSING),void this._footer.disableContinue()):void this._updateFooter():(this._footer.setError(PF.VariantPicker.Footer.EMBROIDERY_THREAD_COLOR_LIMIT.replace("{limit}",PF.ProductPush.EmbroideryHelper.EMBROIDERY_MAX_SELECTED_THREAD_COLORS)),void this._footer.disableContinue()):(this._footer.setError(PF.VariantPicker.Footer.TEXT_TOO_LONG),void this._footer.disableContinue());this._footer.disableContinue()}},_isFileGenerationRequired:function(){var e=this._getFirstMatchingVariant();return!!this._isDesignerSupported&&(e&&this._orderLineItem.variantId!==e.variantId||this._orderLineItem.shouldCreateNewDesign||this._designer.haveProductOptionsChanged(this._par.orderLineItem.options)||this._designer.hasDesignChanged())},_hasCustomizerConfigChanged:function(){var e=this.getPushDesigner().getDesignData().hasCustomizableLayers(),i=this._memory.getDesignData(),t=new PF.ProductPush.DesignData;return t.templates=i.templates,e!==t.hasCustomizableLayers()},_requestCustomizableUpdate:function(e){this._showLoader();var i=this._designer.getDesignData();i.generatorDesignId=this._orderLineItem.designId,(new PF.Repositories.GeneratorRepository).updateCustomizer(i,e)},_requestFileGeneration:function(e){var i=this._designer.getDesignData();i.arePrintfilesHidden=!0,i.orderId=this._par.orderLineItem.orderId,this._memory.rememberDesignData(i.toArray()),this._par.isVariantSyncFlow||this._orderLineItem.shouldCreateNewDesign||(i.generatorDesignId=this._orderLineItem.designId),(new PF.Repositories.GeneratorRepository).generateLibraryFiles(i,e,!1,{onStarted:this._onGeneratingFilesStarted,onProgress:this._onGeneratingFilesProgress,onFailed:this._onGeneratingFilesFailed,onCompleted:this._onGeneratingFilesCompleted}),this._generationTimeoutId=setTimeout(this._onGenerationTimedOut,1e5)},_onGeneratingFilesStarted:function(e,i,t){void 0!==t&&(this._par.orderLineItem.design=PF.Items.GeneratorDesign.fromDesignData(this._designer.getDesignData(),t),this._par.orderLineItem.designId=t,this._orderLineItem.shouldCreateNewDesign=!1,this._orderLineItem.isCopy=!1,this._memory.rememberGeneratorDesignId(t),this._onGeneratorDesignIdChanged&&this._onGeneratorDesignIdChanged(t))},_onGeneratingFilesProgress:function(e){},_onGeneratingFilesFailed:function(){clearTimeout(this._generationTimeoutId),this._orderLineItem.isGeneratingFilesFromDesign=!1,this._haveFilesGeneratedSuccessfully=!1,this._memory.forgetDesignData(),PF.ErrorLogger.log("_onGeneratingFilesFailed failed! Calling onContinue anyway. Customer: "+PF.Customer.customerId),this._onContinueAfterFilesDone()},_onGenerationTimedOut:function(){PF.ErrorLogger.log("_onGenerationTimedOut! Customer: "+PF.Customer.customerId),this._onGeneratingFilesFailed()},_onGeneratingFilesCompleted:function(e){clearTimeout(this._generationTimeoutId),this._orderLineItem.isGeneratingFilesFromDesign=!1,this._haveFilesGeneratedSuccessfully=!0;var i=this._getUpdatedItemFiles();for(var t in e){var r=e[t];for(var n in r){var s=r[n];for(var a in i){var o=i[a];if(o.type===t){var l=o.getClone();l.fileErrors=[],l.fileStatus=l.isMockup()?PF.Items.OrderLineItemFile.STATUS_UNKNOWN:PF.Items.OrderLineItemFile.STATUS_OK,l.fileId=s.fileId,l.position=null,i[a]=l}}}}this._itemFiles=[].concat(i);var c=this._getNativeLabelProcessingParams();c?this._processNativeInsideLabel(c,this._onContinueAfterFilesDone):this._onContinueAfterFilesDone()},_updateGeneratorDesign:function(e){this._orderLineItem.design=e},_hasSameValues:function(e,i){for(var t in e)if(i.indexOf(e[t])<0)return!1;return!0},_setActiveVariant:function(){this._variant=this._getFirstMatchingVariant(),this._updateColorsState()._updateSizesState()},_addDetails:function(){this._detailedSizePicker=this._par.detailedPicker&&!this._designer.hasValidSize()?mkE({tag:"div",className:"tooltip face bottom in",prop:{role:"tooltip"},style:{left:"100px"},els:[{tag:"div",className:"tooltip-arrow",style:{left:"50%"}},{tag:"div",className:"tooltip-inner",text:lang("Choose size")}]}).append(this._designer.getSizePicker().node):""},_shouldUseExistingDesign:function(){if(this._orderLineItem.shouldCreateNewDesign)return!1;var e=this._memory.getDesignData();if(!e)return!0;var i=(new PF.Repositories.Products).getCachedProductById(e.productId);return!i||i.type===this._product.type},_canProceedWithSampleVariant:function(){return!this._isSampleOrder||this._sampleVariantAvailability.isAvailableVariant(this._variant)},_updateFooterErrors:function(){var e=[];return this.getPushDesigner().hasEmbroideryTextSizeError()&&e.push(PF.VariantPicker.Footer.EMBROIDERY_TEXT_TOO_SMALL),this.getPushDesigner().hasEmbroideryTextOverlapError()&&e.push(PF.VariantPicker.Footer.EMBROIDERY_LAYERS_OVERLAPPING),this.getPushDesigner().hasEmbroideryPositionError()&&e.push(PF.VariantPicker.Footer.EMBROIDERY_OUT_OF_BOUNDS),this.getPushDesigner().hasNeededQuality()||e.push(PF.VariantPicker.Footer.PRINTFILE_TOO_SMALL),this.getPushDesigner().isFileLimitExceeded()&&e.push(this.getPushDesigner().getFileLimitExceededText()),this._footer.setError(e),e.length>0}},mkE.Base)}()},WLCh:function(e,i){!function(){"use strict";PF.VariantPicker.PickersConfig=Class({sizeConfig:null,colorConfig:null,activeRegion:"",isSampleOrder:!1,productOptionsValues:null,placementPrices:{},fileTags:{},__construct:function(){this.setSizeConfig(new PF.VariantPicker.PickersConfig.ConfigBlueprint).setColorConfig(new PF.VariantPicker.PickersConfig.ConfigBlueprint)},setSizeConfig:function(e){return this.sizeConfig=e,this},setColorConfig:function(e){return this.colorConfig=e,this},setActiveRegion:function(e){return this.activeRegion=e,this},setPlacementPrices:function(e){return this.placementPrices=e,this},setSampleOrderStatus:function(e){return this.isSampleOrder=e,this},setFileTags:function(e,i){return this.placementGroups=e,this.fileTags=i,this},getFileTag:function(e,i){if(!this.placementGroups||!this.fileTags)return"";var t=i+"_"+this.placementGroups[e];return this.fileTags[t]?"tag: "+this.fileTags[t]:""},setOptionsValues:function(e){return this.productOptionsValues=e,this}}),PF.VariantPicker.PickersConfig.TYPE_SIZE="size",PF.VariantPicker.PickersConfig.TYPE_COLOR="color",PF.VariantPicker.PickersConfig.TYPE_PRODUCT_OPTIONS="productOptions",PF.VariantPicker.PickersConfig.ConfigBlueprint=Class({maxValues:0,defaultValue:null,isPopoverEnabled:!1,__construct:function(e,i,t){void 0!==e&&(this.maxValues=e),void 0!==i&&(this.defaultValue=i),void 0!==t&&(this.isPopoverEnabled=t)}})}()},Y6pR:function(e,i){!function(){"use strict";PF.VariantPicker.PriceCalculator=Class({_placementPrices:null,_placementIdsWithLayers:[],_availablePlacements:[],_product:null,__construct:function(e,i){this._product=e,i&&this.updatePlacementPrices(i)},updatePlacementPrices:function(e){return this._placementPrices=e,this},updatePlacementsWithLayers:function(e){return this._placementIdsWithLayers=e,this},setAvailablePlacements:function(e){return this._availablePlacements=e.map((function(e){return e.id})),this},getFormattedPlacementPrices:function(){var e={};return this._placementIdsWithLayers.length<=1&&!this._hasOnlyInsideLabel()?e:(this._availablePlacements.filter((function(e){return this._placementIdsWithLayers.indexOf(e)>-1}),this).forEach((function(i){e[i]=this.getPlacementPriceData(new PF.VariantPicker.PlacementChecker(i))}),this),e)},getPlacementPriceData:function(e){var i=!!this._getFirstPlacementWithLayers(),t=this._isLabelAvailable(),r=i&&this._hasFrontOrBack(),n=this._getPlacementPrice([PF.Items.OrderLineItemFile.TYPE_BACK,PF.Items.OrderLineItemFile.TYPE_EMBROIDERY_BACK]),s=null,a=this._getFirstPlacementWithLayers();return(this._hasLayers(e.getId())||(e.isFront()||e.isBack())&&!r&&t)&&(i=!1),this._hasLayers(e.getId())&&!e.isLabel()&&e.getId()!==a&&(i=!0),e.isLabel()&&(i=!0),i&&(e.isFront()||e.isEmbroideryFront())&&(s=n),{canDisplayPrice:i,basePrice:this._placementPrices.getDiscountedPrice(e.getId()),finalPrice:s,currency:this._product.priceRange.currency}},getTotal:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!0,r=!0,n=!0,s=this._adjustBasePrice(e.priceData.price);return i&&(s=this._adjustBasePrice(e.priceData.discountedPrice)),this._placementIdsWithLayers.forEach((function(e){var a=new PF.VariantPicker.PlacementChecker(e);(!a.isBack()&&!a.isOutsideLabel()||this._hasFront())&&(this._shouldIgnoreExtraSleevePrice(r)?r=!1:this._shouldIgnoreExtraLegPrice(n)?n=!1:!a.isEmbroiderySide()&&!a.isEmbroideryBack()||this._hasFrontEmbroidery()||!t?s+=i?this._placementPrices.getDiscountedPrice(a.getId()):this._placementPrices.getPrice(a.getId()):t=!1)}),this),s},_adjustBasePrice:function(e){var i=this._getActiveTechnique();if(this._product.type!==i&&!this._hasPlacementsWithLayers()){var t=this._placementPrices.getPlacementsByTechnique(i);t.length&&(e+=this._placementPrices.getPrice(t[0]))}return e},_hasLayers:function(e){return this._placementIdsWithLayers.indexOf(e)>-1},_getFirstPlacementWithLayers:function(){return this._hasPlacementsWithLayers()?this._placementIdsWithLayers.slice().shift():null},_getPlacementPrice:function(e){for(var i in e){var t=this._placementPrices.getDiscountedPrice(e[i]);if(t)return t}return null},_isLabelAvailable:function(){return this._availablePlacements.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isLabel()})).length>0},_hasOnlyInsideLabel:function(){return 1===this._placementIdsWithLayers.length&&1===this._placementIdsWithLayers.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isInsideLabel()})).length},_hasFrontOrBack:function(){return this._placementIdsWithLayers.filter((function(e){var i=new PF.VariantPicker.PlacementChecker(e);return i.isFront()||i.isBack()})).length>0},_hasFront:function(){return this._placementIdsWithLayers.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isFront()})).length>0},_shouldIgnoreExtraSleevePrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isSleeve()&&!this._hasFrontOrBack()}),this).length>0},_shouldIgnoreExtraLegPrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isLeg()}),this).length>0},_hasPlacementsWithLayers:function(e){return e||(e=0),this._placementIdsWithLayers.length>e},_getActiveTechnique:function(){return PF.Utils.TechniqueMemory(this._product.productId).getTechniqueFromMemory()},_hasFrontEmbroidery:function(){return this._placementIdsWithLayers.filter((function(e){return new PF.VariantPicker.PlacementChecker(e).isEmbroideryFront()})).length>0}}),PF.VariantPicker.PlacementChecker=Class({_placementId:"",__construct:function(e){this._placementId=e},getId:function(){return this._placementId},isMockup:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_MOCKUP])},isFront:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_FRONT,PF.Items.OrderLineItemFile.TYPE_DEFAULT])},isBack:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_BACK])},isLabel:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_LABEL_OUTSIDE,PF.Items.OrderLineItemFile.TYPE_LABEL_INSIDE])},isInsideLabel:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_LABEL_INSIDE])},isOutsideLabel:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_LABEL_OUTSIDE])},isSleeve:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_SLEEVE_LEFT,PF.Items.OrderLineItemFile.TYPE_SLEEVE_RIGHT])},isLeg:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_LEG_LEFT,PF.Items.OrderLineItemFile.TYPE_LEG_RIGHT])},isEmbroideryFront:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_EMBROIDERY_FRONT])},isEmbroideryBack:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_EMBROIDERY_BACK])},isEmbroiderySide:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_EMBROIDERY_LEFT,PF.Items.OrderLineItemFile.TYPE_EMBROIDERY_RIGHT])},isHangTag:function(){return this._is([PF.Items.OrderLineItemFile.TYPE_HANG_TAG])},_is:function(e){return e.indexOf(this._placementId)>-1}}),PF.VariantPicker.PricesCollection=Class({items:[],add:function(e,i,t,r){this.items.push({placementId:t,discountedPrice:r,price:e,technique:i})},getPrice:function(e){var i=this._findItem(e);return i?i.price:null},getDiscountedPrice:function(e){var i=this._findItem(e);return i?i.discountedPrice:null},getTechnique:function(e){var i=this._findItem(e);return i?i.technique:null},getPlacementsByTechnique:function(e){return this.items.filter((function(i){return i.technique===e})).map((function(e){return e.placementId}))},_findItem:function(e){return this.items.filter((function(i){return i.placementId===e})).slice().shift()}})}()},ZPm7:function(e,i){!function(){"use strict";PF.VariantPicker.ColorPicker=Class({__NAME:"PF.VariantPicker.ColorPicker",_PRODUCTS_WITHOUT_REGION_POPOVER:[],_variants:[],_variant:null,_availableColors:null,_discontinuedColors:[],_disabledRegionColors:[],_unavailableColors:[],_selectedColor:null,_isHats:!1,nodeError:null,__construct:function(e,i,t,r){this.setVariants(e),this._productId=t,r&&(this._marginClass=r);var n=this._getColorCount();if(0!==n){if(1===n)for(var s in e){this._variant=e[s],this._setSelectedColor(this._variant.color);break}var a=(new PF.Repositories.Products).getCachedProductById(t);a.isInCategory(PF.Repositories.CategoryRepository.CATEGORY_HATS)&&(this._isHats=!0),this.node=mkE({tag:"div",className:this._marginClass||"margin-bottom-30",els:[{tag:"div",className:"margin-bottom-5",els:[{tag:"b",text:a.getColorPickerTitle(1)}]},this._nodePicker=mkE({tag:"div"}),this.nodeError=mkE({tag:"div",className:"alert alert-danger text-center hidden padding-10 margin-top-15",text:lang("Please choose a color!")})]}),this._onColorChangedCallback=i,this.render()}else this.node=mkE({tag:"div"})},_render:function(){var e;if(mkE.clearNode(this._nodePicker),this._isButtonPicker())for(var i in this._availableColors){e=this._availableColors[i];var t="btn btn-empty btn-sm pf-mb-4 pf-mr-4 color-picker__item";this._selectedColor===i&&(t+=" color-picker__item--active"),this._unavailableColors.indexOf(i)>-1&&(t+=" btn-default"),this._discontinuedColors.indexOf(i)>-1&&(t+=" color-picker__item--disabled"),mkE({tag:"a",className:t,text:i,onclick:this._onButtonSelectorPicked.bind(this,i)}).append(this._nodePicker)}else{var r=new PF.Components.ColorPicker.Par;r.maxCount=1,r.showHuge=!0,r.preSelectFirst=!0,r.canDeselectLast=!1,r.colors=this._availableColors,r.onChange=this._onColorPicked,this._variant&&(r.selectedColors=[this._variant.color]),this._picker=new PF.Components.ColorPicker(r),this._picker.append(this._nodePicker);var n=this._picker.getSelectedColors();if(n){var s=this.getAvailableVariantByColor(n[0]);s&&this.setVariant(s)}var a=new Url;if(a.query.color)for(e in this._availableColors)e===a.query.color&&this._setSelectedColor(a.query.color)}},render:function(){this._picker?(this._picker.render(),this.togglePopover()):this._render()},_getColorCount:function(){return Object.keys(this._availableColors).length},getValueCount:function(){return this._getColorCount()},_onColorPicked:function(){this._selectedColor=this._picker?this._picker.getSelectedColors()[0]:null,this._onColorChangedCallback(this._selectedColor),this.togglePopover()},_onButtonSelectorPicked:function(e){this._selectedColor=e,this._onColorChangedCallback(this._selectedColor),this._render()},setVariants:function(e){this._variants=e,this._availableColors=PF.Utils.Colors.fetchColorsFromVariants(this._variants)},getAvailableVariantByColor:function(e){for(var i in this._variants){var t=this._variants[i];if(t.color===e)return t}return null},getColor:function(){return this._selectedColor},setVariant:function(e){var i=this._getColorCount();if(this._variant=e,this._variant)this._setSelectedColor(this._variant.color);else if(1===i)for(var t in this._variants){this._variant=this._variants[t],this._setSelectedColor(this._variant.color);break}},setUnavailableColors:function(e){this._unavailableColors=e,this._isColorsAvailable()&&this._picker.setUnavailableColors(e)},setDiscontinuedColors:function(e){this._discontinuedColors=e,this._isColorsAvailable()&&this._picker.setDiscontinuedColors(e)},setDisabledRegionColors:function(e){this._disabledRegionColors=e,this._isColorsAvailable()&&this._picker.setDisabledRegionColors(e)},setVariantsAndDisabledRegionColors:function(e,i,t){this.getAvailableColors()&&(this.setVariants(e),this.setSelectedRegionDisabledValues(e,i,"color",t),this.setDisabledRegionColors(this.getSelectedRegionDisabledValues("color")),this.render())},_isColorsAvailable:function(){return!(!this._getColorCount()||0===this._getColorCount())&&(!!this._picker||(this._render(),!1))},_isButtonPicker:function(){for(var e in this._variants){var i=this._variants[e];if(i.color&&!i.colorCode)return!0}return!1},isValuePicked:function(){return!!this.getColor()},hasAtLeastOneValue:function(){return!!this._getColorCount()},togglePopover:function(){var e=this._selectedColor;if(e&&this._picker){var i="";this._PRODUCTS_WITHOUT_REGION_POPOVER.indexOf(this._productId)>-1||(this._picker.getDiscontinuedColors().indexOf(this._selectedColor)>-1?(i=lang("Sorry, this color and size combination is discontinued. Please choose another color or size."),this._picker.showPopover(e,lang("Discontinued"),i)):this._picker.getDisabledRegionColors().indexOf(this._selectedColor)>-1?(i=lang("Ships to locations worldwide"),this._picker.showPopover(e,dlang("site","Fulfilled in {region}").replace("{region}",this.getAvailableAttributeRegion(e,"color")),i)):this._picker.getUnavailableColors().indexOf(this._selectedColor)>-1&&(i=lang("Sorry, this color and size combination is out of stock. Fulfillment may take longer while we re-stock."),this._picker.showPopover(e,lang("Out of stock"),i)))}},getAvailableColors:function(){var e=[];for(var i in this._availableColors)-1===e.indexOf(i)&&e.push(i);return e},_setSelectedColor:function(e){this._selectedColor=e,this._picker&&this._picker.setSelectedColor(e)}},PF.VariantPicker.BasePicker)}()},bGr9:function(e,i){!function(){"use strict";PF.VariantPicker.VariantAvailability=Class({_availability:{},_variants:[],__construct:function(e){this._variants=e,this._availability=this._getSortedByAvailability()},_getMatchingColors:function(e,i){var t=[];for(var r in e){var n=e[r];i&&n.size!==i||t.push(n.color)}return t},getUnAvailableColors:function(e){if(!e)return[];var i=this._availability.outOfStock;return this._getMatchingColors(i,e)},getDiscontinuedColors:function(e){var i=this._availability.discontinued;return this._getMatchingColors(i,e)},getUnavailableSizes:function(e,i){var t=this._availability.outOfStock.concat(this._availability.discontinued);for(var r in t){var n=t[r];n.color===e&&i.push(n.size)}return[].concat(this.getNonExistentSizes(e,i))},getNonExistentColors:function(e,i){if(!e)return[];for(var t in this._variants){var r=this._variants[t],n=i.indexOf(r.color);r.size===e&&-1!==n&&i.splice(n,1)}return i},getNonExistentSizes:function(e,i){if(!e)return[];for(var t in this._variants){var r=this._variants[t],n=i.indexOf(r.size);r.color===e&&-1!==n&&i.splice(n,1)}return i},_getSortedByAvailability:function(){var e={available:[],outOfStock:[],discontinued:[]},i=(new Url).path.indexOf("/dashboard/sync")>-1;for(var t in this._variants){var r=this._variants[t];r.hasStock&&!i?e.available.push(r):r.hasStock&&!i||!r.isDisabledInPush?r.hasStock||e.outOfStock.push(r):e.discontinued.push(r)}return e},isVariantDiscontinued:function(e){for(var i in this._availability.discontinued){var t=this._availability.discontinued[i];if(e.variantId===t.variantId)return!0}return!1},areAllVariantsDiscontinued:function(){return this._availability.discontinued.length===this._variants.length}})}()},llTG:function(e,i){!function(){"use strict";PF.VariantPicker.Par=function(){},PF.VariantPicker.Par.prototype.orderLineItem=null,PF.VariantPicker.Par.prototype.productId=null,PF.VariantPicker.Par.prototype.storeId=null,PF.VariantPicker.Par.prototype.currency=null,PF.VariantPicker.Par.prototype.callback=null,PF.VariantPicker.Par.prototype.callbackWithGeneratingFiles=null,PF.VariantPicker.Par.prototype.onGeneratorDesignIdChanged=null,PF.VariantPicker.Par.prototype.skipMemory=null,PF.VariantPicker.Par.prototype.productTemplateEditorState=null,PF.VariantPicker.Par.prototype.onBack=null,PF.VariantPicker.Par.prototype.externalId="",PF.VariantPicker.Par.prototype.detailedPicker=!1,PF.VariantPicker.Par.prototype.isVariantSyncFlow=!1,PF.VariantPicker.Par.prototype.flow="",PF.VariantPicker.Par.prototype.isSampleOrder=!1,PF.VariantPicker.Par.prototype.stickyButtonNodeUpdate=null,PF.VariantPicker.Par.prototype.isModalOrder=!1,PF.VariantPicker.Par.prototype.activePlacementId=null,PF.VariantPicker.Par.prototype.enableCustomizableLayers=!1,PF.VariantPicker.Par.prototype.isModalDesigner=!1,PF.VariantPicker.Par.prototype.generatorParameters=null,PF.VariantPicker.Par.prototype.onDesignerLoaded=null,PF.VariantPicker.Par.prototype.onLoaderToggle=null,PF.VariantPicker.Par.prototype.onProductLoaded=null,PF.VariantPicker.Par.prototype.onCanContinueChange=null,PF.VariantPicker.Par.prototype.isShoppingCart=!1}()},o0zJ:function(e,i){!function(){"use strict";PF.VariantPicker.DesignerInfoPopup=Class({_key:"shownGraphicPlacementHintPopupTimes",__construct:function(){if(localStorage){var e=localStorage.getItem(this._key);if(e||(e=0),e<2){this._showGraphicPlacementHintPopup();try{localStorage.setItem(this._key,++e)}catch(e){alert(lang("You are in a Private/Incognito Mode. It does not support storing settings locally."))}}}},_showGraphicPlacementHintPopup:function(){var e=new PF.Modal({modalDialogClass:"modal-dialog__black-modal"});e.setHeaderContent(""),e.setContent(mkE({tag:"div",els:[{tag:"div",className:"hint-arrow"},{tag:"h6",text:lang("The placement of the graphic is up to you!")},{tag:"p",text:lang("Click to drag the graphic around until you find the perfect spot: thats what it will look like printed.")},{tag:"a",className:"btn btn-danger",text:clang("action (understood)","Got it"),prop:{onclick:$.proxy(this._confirm,this,e)}}]})),e.show()},_confirm:function(e){localStorage.setItem(this._key,666),e.remove()}})}()},oTrQ:function(e,i){!function(){"use strict";PF.VariantPicker.ReviewBlock=Class({_product:null,__construct:function(e){if(this._product=e,this.node=mkE({tag:"div"}),this._product.reviewRating&&this._product.reviewRating.reviewCount){for(var i=[],t=1;t<=5;t++){var r=this._product.reviewRating.rating,n="icon-star";parseInt(r)!==r&&Math.round(r)===t?n="icon-star-half":t>r&&(n="icon-star-empty"),i.push({tag:"span",className:n+" star-rating__star"})}var s=this._product.reviewRating.reviewCount;this.node=mkE({tag:"div",els:[{tag:"a",className:"pf-link pf-ui-caption pf-mt-4",onclick:this._popupForProductInfo.bind(this,PF.ProductInfo.TAB_REVIEWS),data:{toggle:"tooltip",placement:"bottom"},els:[{tag:"div",className:"star-rating__stars star-rating__stars--inline",els:i},nlang("%d Review","%d Reviews",s)]},{tag:"div",els:[{tag:"a",className:"pf-link",text:lang("Product info & templates"),onclick:this._popupForProductInfo.bind(this,PF.ProductInfo.TAB_INFO)}]}]})}},_popupForProductInfo:function(e){new PF.ProductInfo.Modal({product:this._product,activeTab:e,showReviews:!0})}},mkE.Base)}()},oixo:function(e,i){!function(){"use strict";PF.VariantPicker.OptionPicker=Class({__NAME:"PF.VariantPicker.OptionPicker",_optionPicker:null,nodeError:null,__construct:function(e){this.setProductOptions(PF.Components.ProductOptions(e)),this.nodeError=tag("div","alert alert-danger text-center hidden padding-10 margin-top-15",dlang("site","Please choose options!")),this.node=tag("div","margin-bottom-10"),this.render()},render:function(){mkE.clearNode(this.node),this._optionPicker.append(this.node),this.nodeError.append(this.node)},setPickerGeneratorPlacements:function(e){this._optionPicker&&this._optionPicker.hasOwnProperty("setGeneratorPlacements")&&this._optionPicker.setGeneratorPlacements(e)},getValues:function(){return this._optionPicker.getValues()},getData:function(){return this._optionPicker.getData?this._optionPicker.getData():{}},getPrices:function(){return this._optionPicker.getPrices?this._optionPicker.getPrices():{}},setValue:function(e,i){this._optionPicker.setValue&&this._optionPicker.setValue(e,i)},getValueCount:function(){return Object.keys(this.getValues()).length},setFileTypesWithFiles:function(e){return this._optionPicker.setPlacementIdsWithLayers(e).renderOptions(),this},setPlacementIdsWithFiles:function(e){return this._optionPicker.setPlacementIdsWithFiles(e).renderOptions(),this},hasValidOptions:function(){return this._optionPicker.hasValidOptions()},hasOption:function(e){return this._optionPicker.hasOption(e)},getExtraPrice:function(){return this._optionPicker.getExtraPrice()},hasSameValues:function(e,i){return this._optionPicker.hasSameValues(e,i)},isValuePicked:function(){return!!this.hasValidOptions()},hideError:function(){mkE.addClassName(this.nodeError,"hidden")},updateErrorStatus:function(){return mkE.setNodeText(this.nodeError,this._optionPicker.errorMessage),!!mkE.hasClassName(this.node,"hidden")||(this.isValuePicked()?(mkE.addClassName(this.nodeError,"hidden"),!0):(mkE.removeClassName(this.nodeError,"hidden"),!1))},setProductOptions:function(e){return this._optionPicker=e,this},hasVisibleOptions:function(){return this._optionPicker.hasVisibleOptions()},setSelectedPlacementId:function(e){this._optionPicker.setSelectedPlacementId(e)}},PF.VariantPicker.BasePicker)}()},rFrQ:function(e,i){!function(){"use strict";PF.VariantPicker.Footer=Class({__NAME:"PF.VariantPicker.Footer",_par:null,__construct:function(e,i){this._par=e;var t=this._par.isModalOrder?"navigation__sticky-buttons--popup":"";this.node=tag("div","function"==typeof this._par.stickyButtonNodeUpdate?"navigation__sticky-buttons "+t:"row variant-picker-footer",[tag("div",(this._par.isModalOrder?"container-fluid":"container")+(this._par.detailedPicker?"":" variant-picker-footer--centered"),[tag("div","row",[tag("div","col-auto order-1",[this._par.onBack?tag("a",{className:"pf-btn pf-btn-secondary pf-mr-sm-12 pf-mb-8 pf-mb-sm-0",onclick:this._par.onBack},lang("Back")):"",this._buttonContinue=tag("div",{className:"btn btn-danger",id:"js--variant-picker-continue-button",onclick:i,attr:{dusk:"variant-picker-continue-button"}},this._par.isShoppingCart?dlang("site","Add to cart"):lang("Continue"))]),tag("div","col-12 col-md-auto order-3 order-md-2 text-center text-md-left",[this._nodeError=tag("div","pf-text-red pf-bold pf-mt-8")]),tag("div","col order-2 order-md-3",[this._nodePrice=tag("div","variant-picker-footer__price variant-picker-footer__price--smaller"),this._nodePriceDescription=tag("span","text-muted text-right",lang("Excl. taxes and other charges"))])])])])},setPrice:function(e){if(mkE.clearNode(this._nodePrice),mkE.addClassName(this._nodePriceDescription,"hidden"),e.price>0){var i=PF.Utils.Discount.createDiscountElementFromPriceData(e,null,e.currency===PF.Items.CurrencyItem.CURRENCY_EUR,!0);e.currency!==PF.Items.CurrencyItem.CURRENCY_EUR&&mkE.removeClassName(this._nodePriceDescription,"hidden"),i.append(this._nodePrice)}},setError:function(e){mkE.clearNode(this._nodeError);var i=!1;"string"==typeof e?(i=!!e,this._nodeError.textContent=e):e instanceof Array&&(i=e.length>0,e.forEach(function(e){tag("div","",e).append(this._nodeError)}.bind(this))),"function"==typeof this._par.stickyButtonNodeUpdate&&this._par.updateStickyButtonHeight&&this._par.updateStickyButtonHeight(i)},isContinueJsEventDisabled:function(){return mkE.hasClassName(this._buttonContinue,"js-disabled")},disableContinueJsEvent:function(){mkE.addClassName(this._buttonContinue,"js-disabled")},enableContinueJsEvent:function(){mkE.removeClassName(this._buttonContinue,"js-disabled")},disableContinue:function(){mkE.addClassName(this._buttonContinue,"btn-disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!1)},enableContinue:function(){mkE.removeClassName(this._buttonContinue,"btn-disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!0),this.enableContinueJsEvent()}},mkE.Base),PF.VariantPicker.Footer.PRINTFILE_TOO_SMALL=dlang("dashboard","The DPI is too small to generate print files. Please either increase the DPI (by scaling down the image) or upload a new file."),PF.VariantPicker.Footer.CUSTOMIZABLE_PRINTFILE_TOO_SMALL=lang("Image is too small, please select a file with a larger resolution!"),PF.VariantPicker.Footer.EMBROIDERY_OUT_OF_BOUNDS=dlang("dashboard","Please make sure your text falls within the embroidery area"),PF.VariantPicker.Footer.EMBROIDERY_TEXT_TOO_SMALL=dlang("dashboard","Text size is too small for embroidery"),PF.VariantPicker.Footer.EMBROIDERY_LAYERS_OVERLAPPING=dlang("dashboard","Text layers cant overlap"),PF.VariantPicker.Footer.LAYER_TEXT_TOO_SMALL=dlang("dashboard","Text size is too small"),PF.VariantPicker.Footer.LAYER_CLIPART_TOO_SMALL=dlang("dashboard","Clip art is too small"),PF.VariantPicker.Footer.TEXT_TOO_LONG=dlang("dashboard","Your text is too long. The limit is {limit} characters.").replace("{limit}",100),PF.VariantPicker.Footer.LAYERS_OVERLAPPING=dlang("dashboard","Layers cant overlap"),PF.VariantPicker.Footer.LAYER_OUT_OF_BOUNDS=dlang("dashboard","Please make sure your layer falls within the print area"),PF.VariantPicker.Footer.EMBROIDERY_THREAD_COLOR_LIMIT=dlang("dashboard","To continue, please pick less than {limit} thread colors!"),PF.VariantPicker.Footer.EMBROIDERY_NOTES_MISSING=dlang("dashboard","To continue, please specify which parts of your design are Flat and which 3D in the Embroidery notes")}()},w7uP:function(e,i){!function(){"use strict";PF.VariantPicker.Designer=Class({__NAME:"PF.VariantPicker.Designer",_par:null,_designer:null,isReady:!1,_shouldRegeneratePreview:!0,__construct:function(e){this.node=tag("div"),this._par=e;var i=new PF.ProductPush.Designer.Par;i.store=e.store,i.product=e.product,i.ctaText=lang("Generate files"),i.isOrderFlowMode=!0,i.designerState=this._getDesignerLayerState(e.itemFiles,e.generatorDesignId),i.orderLineItem=e.orderLineItem,i.isProductPushMode=e.isProductPushMode,i.pickerConfig=e.pickerConfig,i.isFooterVisible=!1,i.isCustomizerEnabledJS=e.enableCustomizableLayers,i.autoLoad=e.isDesignerSupported,i.isModalDesigner=e.isModalDesigner,i.productTemplateEditorState=e.productTemplateEditorState,i.generatorParameters=e.generatorParameters,i.onLoaderToggle=e.onLoaderToggle,i.onProductLoaded=e.onProductLoaded,i.isProductPreloaded=!0,this._designer=new PF.ProductPush.Designer(i),e.isDesignerSupported?this._designer.append(this.node):(tag("div","clearfix",[tag("div","col-md-8",[tag("h5","",[e.product.getFullTitle()])]),tag("div","col-md-4",[PF.VariantPicker.ProductImage(e.product.urlImage)])]).append(this.node),this.isReady=!0),this.getObserver().onDesignerReady(this._onDesignerReady).onDesignerDisabled(this._onDesignerDisabled)},getPushDesigner:function(){return this._designer},getDesignData:function(){return this._par.isDesignerSupported&&this._designer.getSelectedGeneratorVariants(!1).variantCount?this._designer.getDesignData():this._designer.designData},getObserver:function(){return this._designer.observer},getColorPicker:function(){return this._designer.getColorPicker()},getSizePicker:function(){return this._designer.getSizePicker()},getLayerPicker:function(){return this._designer.getLayerPicker()},getProductOptionsPicker:function(){return this._designer.getProductOptionsPicker()},getColor:function(){var e=[].concat(this._designer.getColors()).shift();return e?e.color:""},getSize:function(){var e=[].concat(this._designer.getSizes()).shift();return e||""},getRegion:function(){return this._designer.getRegion()},hasValidProductOptions:function(){return this._designer.getProductOptionsPicker()&&this._designer.getProductOptionsPicker().hasValidOptions()},getExtraPrice:function(){return this._designer.getProductOptionsPicker().getExtraPrice()},getProductOptions:function(){var e=!this._designer.shouldAllowFileColorChanger();return this._designer.getProductOptionsValues(!0,e)},haveProductOptionsChanged:function(e,i){return e||(e=(new PF.VariantPicker.Memory).getOptions()),this._par.product.isCutSew()&&this._designer.getProductOptionsPicker()?!this._designer.getProductOptionsPicker().hasSameValues(e):(!this._par.productTemplateEditorState||!this._par.productTemplateEditorState.useSimpleDesigner)&&!this._designer.getLayerPicker().hasSameProductOptionValues(e,i)},isDesignSimple:function(e){var i=this.getDesignData();return!i.templates||0===Object.values(i.templates).filter((function(i){return!e||i.placementId===e})).filter(this._isTemplateSimple).length},_isTemplateSimple:function(e){return e.layers.length>1||e.layers.filter((function(e){return e.isTextLayer()||e.isClipartLayer()})).length>0},getDefaultPlacementPosition:function(e){return e===PF.Items.OrderLineItemFile.TYPE_MOCKUP?null:this._designer._getTemplate(e).getDefaultPositions()},hasDesignChanged:function(e){var i=this.getChangedPlacementIds();return e?i.indexOf(e)>-1:!!i.length},hasOnlyInsideOrOutsideLabelOrHangTag:function(){return!!this._par.isDesignerSupported&&0===this._getPlacementIdsWithDesign().filter((function(e){var i=new PF.VariantPicker.PlacementChecker(e);return!i.isInsideLabel()&&!i.isHangTag()&&!i.isOutsideLabel()})).length},hasPlacementWithDesignFillColor:function(){return!!this._par.isDesignerSupported&&PF.Items.PlacementOptions.fromArray(this._designer.designData.rawPlacementOptions).hasPlacementWithFillColor()},hasValidColor:function(){return!this.getColorPicker()||!!this.getColor()},hasValidSize:function(){return!this.getSizePicker()||!!this.getSize()},getChangedPlacementIds:function(){var e=(new PF.VariantPicker.Memory).getDesignData(),i=this.getDesignData();if(!e||e.forceOrientation!==i.forceOrientation)return i.getPlacementIdsWithDesign();var t=PF.Items.PlacementOptions.fromArray(e.rawPlacementOptions),r=PF.Items.PlacementOptions.fromArray(i.rawPlacementOptions),n=Object.values(i.templates).filter((function(n,s){if(this.haveProductOptionsChanged(e.productOptions,n.placementId))return!0;if(t.getPlacementFillColor(n.placementId)!==r.getPlacementFillColor(n.placementId))return!0;if(!e.templates)return!0;var a=Object.keys(i.templates)[s];if(!a||!e.templates[a])return!0;var o=PF.Items.GeneratorTemplateItem.fromArray(e.templates[a]);return o.layers.length!==n.layers.length||n.layers.some((function(e,i){var t=o.layers[i];return!t||e.isChanged(t)}))}),this).map((function(e){return e.placementId}));if(e.templates&&Object.keys(i.templates).length!==Object.keys(e.templates).length)for(var s in e.templates)i.templates[s]||n.push(s);return n},getFilesTypesToGenerate:function(e){if(!this._par.isDesignerSupported)return[];if(!this.hasDesignChanged())return[PF.Items.OrderLineItemFile.TYPE_MOCKUP];var i=this.getChangedPlacementIds();if(!i.length)return[PF.Items.OrderLineItemFile.TYPE_MOCKUP];var t=i.filter((function(i){var t=this.getPushDesigner().isPlacementSimple(i);return i===PF.Items.OrderLineItemFile.TYPE_LABEL_INSIDE&&this._designer.designData.hasLabelNative()?!t:!e&&!t}),this);return t.push(PF.Items.OrderLineItemFile.TYPE_MOCKUP),t},getTechnique:function(){return this._designer.getTechnique()},canContinue:function(){return this.isReady&&this.hasValidColor()&&this.hasValidSize()&&this._hasValidFiles()&&this._designer.areTextLayersValid()&&this._designer.areEmbroideryThreadColorsValid()&&!this._designer.hasEmbroideryNotesError()&&this._designer.hasNeededQuality()&&this._designer.getProductOptionsPicker().hasValidOptions()&&this._designer.isDesignValid()},updateErrors:function(){return this.getColorPicker()&&!this.getColorPicker().updateErrorStatus()?(this._designer.showProductTab(),void this.getColorPicker().scrollToNodeError()):this.getSizePicker()&&!this.getSizePicker().updateErrorStatus(lang("Please choose a size"))?(this._designer.showProductTab(),void this.getSizePicker().scrollToNodeError()):this.getLayerPicker()&&!this.getLayerPicker().checkProductOptionsStatus()?(this._designer.showDesignTab(),void this.getLayerPicker().getProductOptionsPicker().scrollToNodeError()):this.getLayerPicker()&&!this.getLayerPicker().updateErrorStatus()?(this._designer.showDesignTab(),this.getLayerPicker().showError(),void this.getLayerPicker().scrollToNodeError()):this.getProductOptionsPicker()&&!this.getProductOptionsPicker().updateErrorStatus()?(this._designer.showProductTab(),void this.getProductOptionsPicker().scrollToNodeError()):!this._designer.isFilePickerDisabled()||this.getDesignData().hasTextLayers()||this.getDesignData().hasClipartLayers()?void(this.hasOnlyInsideOrOutsideLabelOrHangTag()&&this._designer.gotoFirstPlacementAndDisplayNoRealDesignMsg()):(this._designer.showDesignTab(),void this._designer.getLayerPicker().showError())},registerParentNode:function(e){return this._designer&&this._designer.registerReplaceableParent(e),this},setFileTypesWithFiles:function(e){if(!this._designer)return[];this._designer.getProductOptionsPicker().setFileTypesWithFiles(e)},_getDesignerLayerState:function(e,i){var t=new PF.Repositories.LibraryRepository,r=new PF.ProductPush.DesignerState;return r.generatorDesignId=i,e.filter((function(e){return e.exists()&&!e.isMockup()})).forEach((function(e){r.addPlacementFileLayer(e.type,t.getCachedFile(e.fileId),e.position)})),r},_onDesignerReady:function(){this.isReady=!0},_onDesignerDisabled:function(){this.isReady=!1},_getPlacementIdsWithDesign:function(){return this.getDesignData().getPlacementIdsWithDesign()},getItemFilePosition:function(e,i){return this._designer.getPlacementFilePosition(e,i)},_hasValidFiles:function(){return!this._par.isDesignerSupported||!this.hasOnlyInsideOrOutsideLabelOrHangTag()},getGeneratorParams:function(){return this._designer.getGeneratorParams()}},mkE.Base)}()}},[[22,0]]]);