(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{35:function(t,e,n){n("8qnk"),t.exports=n("8nMH")},"8nMH":function(t,e){!function(){"use strict";PF.UserSettingsMenu=Class({_menuToggleSelector:".js-user-settings-toggle",_taxToggleSelector:".js-tax-settings-toggle",_currencies:[],_currentDisplayCurrency:null,_hasStores:null,_originalDisplayCurrency:null,_modal:null,_taxOptions:null,__construct:function(t){this._currencies=t.currencies,this._currentDisplayCurrency=t.displayCurrency,this._originalDisplayCurrency=t.displayCurrency,this._isLoggedIn=t.isLoggedIn,this._isWarehousingUser=t.isWarehousingUser,this._hasStores=t.hasStores,this._defaultWarehousingCurrency=t.defaultWarehousingCurrency,this._defaultCurrencySymbol=t.defaultCurrencySymbol,this._allStoresCurrencyData=t.allStoresCurrencyData,this._allStoresCurrencySymbol=t.allStoresCurrencySymbol,this.showPricesWithTax=!1;var e,n=document.querySelectorAll(this._menuToggleSelector);for(e=0;e<n.length;e++){n[e].addEventListener("click",function(t){t.stopImmediatePropagation(),this._onMenuToggleClicked()}.bind(this))}var i=document.querySelectorAll(this._taxToggleSelector);for(e=0;e<i.length;e++){i[e].addEventListener("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),this._onMenuToggleClicked()}.bind(this))}},_onMenuToggleClicked:function(){var t=new PF.Modal.Par;t.title=lang("Currency settings"),t.onClose=this._onModalClose.bind(this),t.nodeClass="pf-modal currency-modal",this._currentDisplayCurrency=this._originalDisplayCurrency,this._modal=new PF.Modal(t),this._content=this._getUserSettingsModal(),this._modal.setContent(this._content),this._isLoggedIn&&(this._hasStores||this._isWarehousingUser)&&this._modal.setFooterContent(this._getFooterContent()),this._modal.show()},_getStoreCurrencyBlock:function(){return this._isLoggedIn&&this._hasStores?tag("div","pf-py-12 pf-px-24 pf-d-xs-flex pf-align-items-center pf-justify-content-between text-left",[tag("div","",[tag("p","pf-h4 pf-m-0",[tag("span","pf-i pf-i-24 pf-i-credit-card-outline pf-text-gray"),tag("span","pf-pl-8",lang("Store billing currency"))])]),tag("div","pf-d-flex pf-justify-content-between pf-justify-content-xs-start pf-ui-body pf-mt-8 pf-mt-xs-0",[tag("div","pf-pr-8",[tag("span","pf-pr-8 pf-text-gray",this._allStoresCurrencySymbol+" "+this._allStoresCurrencyData)]),tag("div","",[tag("a",{className:"pf-link",href:langUrl("/dashboard/billing/billing-methods#stores")},[lang("Change"),tag("span","pf-i pf-i-chevron-right pf-link-none pf-d-inline-block")])])])]):""},_getWarehouseCurrencyBlock:function(){return this._isLoggedIn&&this._isWarehousingUser?tag("div","pf-py-12 pf-px-24 pf-d-xs-flex pf-align-items-center pf-justify-content-between text-left",[tag("div","",[tag("p","pf-h4 pf-m-0",[tag("span","pf-i pf-i-24 pf-i-package-variant-closed pf-text-gray"),tag("span","pf-pl-8",lang("Warehouse currency"))])]),tag("div","pf-d-flex pf-justify-content-between pf-justify-content-xs-start pf-ui-body pf-mt-8 pf-mt-xs-0",[tag("div","pf-pr-8",[tag("span","pf-pr-8 pf-text-gray",this._defaultCurrencySymbol+" "+this._defaultWarehousingCurrency)]),tag("div","",[tag("a",{className:"pf-link",href:langUrl("/dashboard/warehouse/settings")},[lang("Change"),tag("span","pf-i pf-i-chevron-right pf-d-inline-block pf-link-none")])])])]):""},_getUserSettingsModal:function(){return this._taxOptions=this._getTaxOptionNode(),this._currencyOptions=this._getCurrencyOptionsNode(),tag("div","",[tag("form","",[tag("div","form-group pf-m-0",[tag("p","pf-h4 pf-m-0",[tag("span","pf-i pf-i-24 pf-i-home-outline pf-text-gray"),tag("span","pf-pl-8",lang("Site browsing currency"))]),tag("p","pf-ui-body pf-text-muted pf-mt-8 pf-mb-0",lang("How you see Printful product and other prices")),this._currencyOptions,this._taxOptions])]),tag("div","pf-mt-24",[tag("button",{className:"pf-btn pf-btn-primary pf-mr-12",type:"button",prop:{onclick:this._onApplySettings.bind(this)}},lang("Apply"))])])},_getCurrencyOptionsNode:function(){for(var t in this.currencyOptionsNode=tag("div","pf-mt-16"),this._currencies){var e=this._currencies[t];tag("label",{className:"pf-normal pf-d-inline pf-m-0 pf-mr-16",style:{cursor:"pointer"}},[tag("input",{type:"radio",value:e.code,checked:this._currentDisplayCurrency===e.code?"checked":"",className:"pf-mr-8 pf-ui-caption",name:"displayCurrency",onclick:this._onCurrencySelect.bind(this,e.code)}),e.symbol+" "+e.code]).append(this.currencyOptionsNode)}return this.currencyOptionsNode},_getFooterContent:function(){var t="";return this._hasStores&&this._isWarehousingUser&&(t=tag("hr","pf-m-0")),tag("div","",[this._getStoreCurrencyBlock(),t,this._getWarehouseCurrencyBlock()])},_onCurrencySelect:function(t){this._currentDisplayCurrency=t,this._updateTaxOptions()},_updateTaxOptions:function(){if(this._modal.getContentNode()&&(mkE.clearNode(this._taxOptions),this._isTaxChoiceAvailable(this._currentDisplayCurrency))){var t=this._getTaxOptionNode().appendTo(this._taxOptions);t&&t.appendTo(this._taxOptions)}},_isTaxChoiceAvailable:function(t){return null!==this._currencies[t].taxes},_getTaxOptionNode:function(){if(!1===this._isTaxChoiceAvailable(this._currentDisplayCurrency))return tag("div");var t=this._currencies[this._currentDisplayCurrency].taxes;return this.showPricesWithTax=!(!t||!t.includedInPrice),tag("div","pf-mt-16",[tag("input",{type:"hidden",name:"taxCurrency",value:this._currentDisplayCurrency}),tag("hr","pf-mt-16 pf-mb-0"),tag("div","pf-mt-16",[tag("label",{className:"pf-normal pf-d-xs-inline pf-mb-0 pf-mr-16",style:{cursor:"pointer"}},[tag("input",{className:"pf-mr-12 pf-ui-caption",type:"radio",name:"showPricesWithTax",onclick:this._resetTaxIncluded.bind(this,!1),checked:!this.showPricesWithTax}),clang("tax","Excluding {taxName}").replace("{taxName}",t.name)]),tag("label",{className:"pf-normal pf-d-xs-inline pf-mt-8 pf-mt-xs-0 pf-mb-0",style:{cursor:"pointer"}},[tag("input",{className:"pf-mr-12 pf-ui-caption",type:"radio",name:"showPricesWithTax",onclick:this._resetTaxIncluded.bind(this,!0),checked:!!this.showPricesWithTax}),clang("tax","Including {taxName}").replace("{taxName}",t.name)])])])},_resetTaxIncluded:function(t){this.showPricesWithTax=t},_onModalClose:function(){this._modal.remove()},_onApplySettings:function(){PF.LoadingOverlay.show(this._content),RPC("user-settings/update-settings",{displayCurrency:this._currentDisplayCurrency,showPricesWithTax:this.showPricesWithTax?1:0,taxCurrency:this._currentDisplayCurrency},function(t){t.success?(PF.Utils.PriceTaxInclusion.toggleTaxInclusion(t.currency,Boolean(t.includeTax)),this._onModalClose(),location=t.url):alert(t.error)}.bind(this))}}),PF.UserSettingsMenu.changeLanguage=function(t){RPC("user-settings/update-language",{displayLanguage:t},function(t){1===t.success?(localStorage.removeItem("AddressSelector"),location.reload()):alert(t.error)}.bind(this))}}()},"8qnk":function(t,e){!function(){"use strict";PF.ShoppingCart=Class({productData:null,variant:null,_productCount:"200+",_cartItem:null,_cartTotal:null,_cartItemCount:0,_contentNode:null,_headerIconNode:null,_dropdownNode:null,_titleNode:null,_notificationNode:null,_itemsNode:null,_subtotalNode:null,_buttonNode:null,_isOpen:null,_shoppingCartNodeId:"js--shopping-cart",__construct:function(t,e,n){e&&(this._shoppingCartNodeId=e),this._cartItem=t,this._contentNode=document.getElementById(this._shoppingCartNodeId),this._contentNode.innerHTML="",this._cartTotal=this._getDiscountedTotal(),this._cartItemCount=t.items.length,t.totalProductCount&&(this._productCount=t.totalProductCount),this._renderHeaderNode(),this._renderDropdownNode(),this._addClickListener(),PF.Events.on(PF.ShoppingCart.EVENT_ITEM_ADD,this._onVariantSelected,this),PF.Events.on(PF.ShoppingCart.EVENT_OPEN_DESIGNER,this._openDesigner,this)},_renderHeaderNode:function(){tag("a",{className:"pf-d-md-flex pf-mx-8 pf-flex-column pf-flex-md-row pf-align-items-center",onclick:this._toggleDropdown.bind(this)},[tag("i","header__link__icon pf-i pf-i-cart pf-i-24"),0!==this._cartItemCount?tag("span","pf-d-inline-block header__link--badge text-center",this._cartItemCount):"",tag("span","pf-ml-sm-4 header__link__text",dlang("site","My cart"))]).append(this._contentNode)},_renderDropdownNode:function(){this._dropdownNode=tag("div","pf-cart__menu pf-w-100 pf-w-md-auto",[tag("div","pf-border-bottom-0",[this._titleNode=this._renderTitleNode(),this._notificationNode=tag("div"),this._itemsNode=this._renderCartItemsNode()]),tag("div","",[this._subtotalNode=this._renderCartTotalNode()]),tag("div","pf-p-16 pf-border-top",[this._buttonNode=this._renderButtonNode()])]).append(this._contentNode)},_openDesigner:function(t){var e=new PF.Items.OrderLineItem;e.productId=t.productData.product.productId,e.variantId=t.variant.variantId;var n=new PF.VariantPicker.Par;n.productId=t.productData.product.productId,n.isProductCatalog=!0,n.storeId=PF.Repositories.StoreRepository.ANONYMOUS_STORE_ID,n.isModalDesigner=!0,n.flow=PF.ProductsCatalog.TYPE_OF,n.orderLineItem=e,n.callback=this._onVariantSelected.bind(this),n.callbackWithGeneratingFiles=this.onVariantItemsGenerating.bind(this),n.stickyButtonNodeUpdate=this.updateNodeStickyButtons.bind(this),n.updateStickyButtonHeight=this.updateNodeStickyButtonsHeight.bind(this),n.isShoppingCart=!0,this._variantPickerNode=new PF.VariantPicker(n),this.showModal(t.productData.product.getFullTitle())},updateNodeStickyButtonsHeight:function(t){return!!this.modal&&(this.modal.updateStickyButtonHeight(t),!0)},updateNodeStickyButtons:function(t){return!!this.modal&&(this.modal.setStickyButtons(t),!0)},showModal:function(t){var e=new PF.Modal.Par;e.title=t,e.closeOnClick=!1,e.allowEsc=!1,e.nodeClass="order-flow",e.useScrollableModal=!0,e.onClose=function(){PF.Events.emit(PF.Events.DESIGNER_REMOVE_LEAVE_WARNING)},this.modal=new PF.Modal(e),this.modal.setContent(this._variantPickerNode),this.modal.show()},_onVariantSelected:function(t,e){t.quantity=1,PF.Repositories.OrderRepository.URL_REF=PF.OrderBegin.B2C_FLOW_KEY,this._onItemAdd(t),e&&e()},onVariantItemsGenerating:function(){PF.LoadingOverlay.show(this.modal.getContentWrapperNode(),{zIndex:11})},_onItemAdd:function(t){(new PF.Repositories.OrderRepository).saveItemToAnonymousOrder({orderItem:PF.Items.OrderItem.fromArray({storeId:-1}),items:[t],callback:this._onDraftSaved.bind(this)})},_onDraftSaved:function(t){this.modal&&this.modal.remove(),this._cartItem=PF.Items.CartItem.fromOrderItem(t),this._cartItemCount=t.items.length,this._cartTotal=this._getDiscountedTotal(),this._contentNode&&mkE.clearNode(this._contentNode),this._renderHeaderNode(),this._renderDropdownNode(),this._appendNotification(),this._showDropdown(),ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Add to Cart Button",eventLabel:"Product added to cart"}),PF.Events.emit(PF.ShoppingCart.EVENT_ITEM_ADD_SUCCESSFUL)},_appendNotification:function(){mkE.clearNode(this._notificationNode),tag("div","pf-p-16 pf-bg-light-green pf-border-bottom",[tag("i","pf-i pf-i-check pf-i-20 pf-text-dark-green"),tag("span","pf-ui-caption pf-text-dark-green pf-pl-8",dlang("site","Product added to your cart!"))]).append(this._notificationNode)},_showDropdown:function(){$("html, body").animate({scrollTop:0},300),this._onOpen()},_renderTitleNode:function(){return tag("div","pf-p-16 pf-w-100 pf-border-bottom",[tag("span","pf-h4 pf-pr-8",dlang("site","My cart")),tag("a",{className:"pf-i pf-i-close pf-i-24 pf-text-gray pull-right",onclick:this._onClose.bind(this)})])},_onOpen:function(){mkE.addClassName(this._dropdownNode,"pf-cart__menu--open"),this._isOpen=!0},_onClose:function(){mkE.removeClassName(this._dropdownNode,"pf-cart__menu--open"),this._isOpen=!1},_toggleDropdown:function(){this._isOpen?this._onClose():this._onOpen()},_onOutsideClicked:function(t){document.getElementById(this._shoppingCartNodeId).contains(t.target)&&"js--cart-close"!==t.target.id||this._onClose()},_addClickListener:function(){document.body.addEventListener("click",this._onOutsideClicked)},_renderCartItemsNode:function(){var t=tag("div","pf-cart__product-wrapper");return this._cartItemCount<1?tag("div","pf-bg-gray-lighter pf-p-16",[tag("img",{className:"pf-mx-auto pf-d-block pf-py-8",loading:"lazy",height:64,src:PF.ASSETS_URL+"images/products-catalog/empty-cart.svg",alt:dlang("site","Empty cart icon")}),tag("p","pf-h4 pf-mb-4 text-center",dlang("site","Your shopping cart is empty")),tag("p","pf-text-muted pf-ui-caption pf-mb-0 text-center",dlang("site","Check out more than {productCount} products in our catalog and find something amazing").replace("{productCount}",this._productCount))]):(this._cartItem.items.forEach(function(e,n){var i=n===this._cartItemCount-1;this._buildItemNode(e,i).append(t)}.bind(this)),t)},_buildItemNode:function(t,e){return tag("div","pf-d-flex pf-pt-16 pf-pb-12 pf-px-16"+(e?"":" pf-border-bottom"),[tag("div","pf-bg-white pf-cart__thumb-wrapper",[tag("img",{className:"pf-cart__thumb pf-d-block pf-mx-auto",prop:{src:t.thumbUrl,loading:"lazy",height:64,alt:t.productName}})]),tag("div","",[PF.Utils.Discount.createLaunchPriceDiscountAnnouncementFromPriceItem(t.priceData),tag("span","pf-ui-caption pf-cart__product-name",t.productName)]),tag("div","pf-cart__item-price pf-ml-auto",[PF.Utils.Discount.createDiscountElementFromPriceData(t.priceData,null,!1,!0,!0)])])},_renderCartTotalNode:function(){return this._subtotalNode&&mkE.clearNode(this._subtotalNode),this._cartItemCount<1?tag("div"):tag("div","pf-border-top",[tag("div","pf-d-flex pf-justify-content-between pf-p-16 pf-bg-gray-lighter",[tag("div","",[tag("span","pf-ui-caption",dlang("site","Subtotal")),this._getTaxStatus(),tag("span","pf-ui-caption",":")]),tag("span","pf-ui-caption pf-bold pf-flex-end",[prettyMoney(this._cartTotal,this._cartItem.currency)])])])},_getTaxStatus:function(){return this._cartItem.currency===PF.Items.CurrencyItem.CURRENCY_EUR?tag("span","pf-ui-caption pf-text-muted"," ("+(PF.Utils.PriceTaxInclusion.isTaxIncluded(this._cartItem.currency)?dlang("site","incl. VAT"):dlang("site","excl. VAT"))+")"):""},_renderButtonNode:function(){return this._cartItemCount?tag("a",{className:"pf-btn pf-btn-primary pf-btn-block",href:langUrl("/dashboard/order/update?ref=b2c")},[tag("span","pf-ui-body pf-text-white",dlang("site","Continue to checkout"))]):tag("a",{className:"pf-btn pf-btn-primary pf-btn-block",href:langUrl("/custom-products")},[tag("span","pf-ui-body pf-text-white",dlang("site","Explore products"))])},_getDiscountedTotal:function(){var t=this._cartItem.items.reduce((function(t,e){return t+e.priceData.discountedPrice}),0);return PF.Utils.PriceTaxInclusion.addTax(this._cartItem.currency,t)}},mkE.Base),PF.ShoppingCart.EVENT_ITEM_ADD="shoppingCartItemAdd",PF.ShoppingCart.EVENT_ITEM_ADD_SUCCESSFUL="shoppingCartItemAddSuccessful",PF.ShoppingCart.EVENT_OPEN_DESIGNER="shoppingCartOpenDesigner"}()}},[[35,0]]]);