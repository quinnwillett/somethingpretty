(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{"/1Sx":function(e,t){!function(){"use strict";PF.Popup.Holiday=Class({__construct:function(e){this.reference=e,this.reference.setPopupSeen(),this.reference.dateFormat()>=this.reference.dateFormat("2016-12-13")&&this.reference.dateFormat()<=this.reference.dateFormat("2016-12-23")?this._renderLayoutChange():this._render()},_render:function(){this.content=mkE({tag:"div",els:[{tag:"img",src:"/static/images/popups/xmas-popup.svg",className:"header-image"},{tag:"div",className:"row",els:[{tag:"div",className:"whitesmoke",els:[{tag:"h5",className:"text-center",text:"We're switching to full-on holiday mode!"},{tag:"p",className:"text-center",text:"If you're ordering a gift that needs to make it under the tree, be sure to check our order deadlines"},{tag:"div",className:"text-center button-container",els:[{tag:"a",href:"https://www.printful.com/holiday-order-deadlines",attr:{target:"_blank"},className:"button small red cwhite",text:"Order deadlines",onclick:$.proxy((function(){this.modal.hide()}),this)}]}]}]}]}),this.modal=new PF.Modal({nodeClass:"holiday-popup",onClose:this._close}),this.modal.setContent(this.content),this.modal.show()},_renderLayoutChange:function(){this.content=mkE({tag:"div",els:[{tag:"img",src:"/static/images/popups/xmas-popup.svg",className:"header-image"},{tag:"div",className:"row",els:[{tag:"div",className:"whitesmoke",els:[{tag:"h5",className:"text-center",text:"Santa’s already packed up his sleigh"},{tag:"p",className:"text-center",text:"Our last holiday order-by date has passed, so we can’t guarantee your orders will make it under the tree."}]}]}]}),this.modal=new PF.Modal({nodeClass:"holiday-popup",onClose:this._close}),this.modal.setContent(this.content),this.modal.show()},_close:function(){this.reference.callCallback()}},mkE.Base)}()},26:function(e,t,o){o("iKTe"),o("kzb9"),o("mJTt"),o("/1Sx"),o("9K2V"),e.exports=o("u/SZ")},"9K2V":function(e,t){!function(){"use strict";PF.Popup.OrderHoldRequest=Class({__construct:function(e){this._orderId=e,this._render()},_render:function(){var e=new PF.Modal.Par;e.title=dlang("orders","Let's double-check your order"),e.modalDialogClass="modal-md hold-request-modal pf-m-0",e.nodeClass="pf-p-12",e.onClose=this._onModalClose,this._modal=new PF.Modal(e),this._holdMessageInput=tag("textarea",{className:"pf-ui-body hold-request-modal__textarea",attr:{placeholder:lang("Your message here (optional)")}}),this._bodyContent=mkE({tag:"div",els:[tag("p","pf-ui-body hold-request-modal__body",dlang("orders","We'll need to go over your order before removing the hold, and we'll send you an email when the hold is removed. If you have any additional comments about your order, leave us a message below.")),this._holdMessageInput]}),this._footerContent=mkE({tag:"div",className:"pf-d-flex pf-flex-column pf-flex-xs-row",els:[{tag:"a",onclick:this._sendHoldRemovalRequest,className:"pf-btn pf-btn-primary pf-mb-12 pf-mb-xs-0 pf-mr-xs-12",text:dlang("orders","Request hold removal")},{tag:"a",onclick:this._onModalClose,className:"pf-btn pf-btn-secondary",els:[{tag:"span",text:dlang("orders","I'm not done yet")}]}]}),this._modal.setContent(this._bodyContent),this._modal.setFooterContent(this._footerContent),this._modal.show()},_sendHoldRemovalRequest:function(){RPC("order-hold/request-hold-removal",{orderId:this._orderId,userMessage:this._holdMessageInput.value},this._onHoldRequestRemovalResponse)},_onHoldRequestRemovalResponse:function(e){location.href=e.redirect},_onModalClose:function(){this._modal.hide(),this._modal.remove(),RPC("order-hold/clear-hold-request-session")}},mkE.Base)}()},iKTe:function(e,t){!function(){"use strict";PF.Popup=PF.Popup||{},PF.Popup=Class({namespace:"popup",endDate:!1,startDate:!1,__construct:function(e,t){this.cb=t||!1,this.popup=e||null,this._create()},setPopupSeen:function(){localStorage&&localStorage.setItem(this.namespace+this.popup,1)},callCallback:function(){return this.cb&&this.cb.call(this.cb),!1},_create:function(){if(localStorage){if(1==localStorage.getItem(this.namespace+this.popup))return this.callCallback(),!1;switch(this.popup){case PF.Popup.HOLIDAY_POPUP:if(this.endDate=this.dateFormat("2016-12-23"),this.startDate=this.dateFormat("2016-12-06"),!this.checkDeadline())return this.callCallback(),!1;new PF.Popup.Holiday(this)}}},dateFormat:function(e){return e?new Date(e).getTime()/1e3:(new Date).getTime()/1e3},checkDeadline:function(){return!!(this.startDate&&this.endDate&&this.dateFormat()>=this.startDate&&this.endDate>=this.dateFormat())},_clearStorage:function(){localStorage&&localStorage.removeItem(this.namespace+this.popup)}}),PF.Popup.HOLIDAY_POPUP="holiday"}()},kzb9:function(e,t){!function(){"use strict";PF.Popup.ChinaPromo=Class({_storageCountKey:"cnPopupCount",_storageIsSubscribedKey:"cnIsSubscribed",_isMainlandChina:!1,__construct:function(e){this._shouldShowPopup()&&(this._isMainlandChina=e,setTimeout(this._render.bind(this),PF.Popup.ChinaPromo.TIMEOUT_BEFORE_SHOW))},_render:function(){var e=new PF.Modal.Par;e.title="欢迎！",e.modalDialogClass="modal-md"+(this._isMobile()?"":" modal-popup--centered"),e.onClose=this._onModalClose,this._modal=new PF.Modal(e),this._bodyContent=mkE({tag:"div",els:[{tag:"p",className:"padding-10",text:"请留下你的邮箱地址，我们将在第一时间给你发送 Printful 在中国的最新消息！"}]});var t=new PF.Forms.InputPar;t.label="你的邮箱地址",t.name="email",t.type="text",t.onblur=function(){this._wechatInput.removeError()}.bind(this),this._emailInput=new PF.Forms.Input(t),(t=new PF.Forms.InputPar).label="微信ID",t.name="wechat",t.onblur=function(){this._emailInput.removeError()}.bind(this),t.type="text",this._wechatInput=new PF.Forms.Input(t),this._footerContent=mkE({tag:"div",className:"row",els:[{tag:"div",className:"col-xs-12 col-sm-8 text-left",els:[this._emailInput]},{tag:"div",className:"col-xs-12 col-sm-8 text-left"+(this._isMainlandChina?"":" hidden"),els:[this._wechatInput]},{tag:"div",className:"col-xs-12 col-sm-4 text-center margin-top-30",els:[this._submitButton=mkE({tag:"a",onclick:this._onSubscribe,className:"button gray cdark medium",els:[{tag:"span",text:"提交"}]})]}]}),this._modal.setContent(this._bodyContent),this._modal.setFooterContent(this._footerContent),this._modal.show(),this._incrementViewCount()},_onModalClose:function(){this._modal.hide()},_onSubscribe:function(){this._wechatInput.getValue()||this._emailInput.getValue()?(PF.LoadingOverlay.show(this._submitButton),RPC("landing/subscribe-china-promo",{email:this._emailInput.getValue(),wechat:this._wechatInput.getValue()},this._onSubscribeRe)):this._showError()},_onSubscribeRe:function(e){if(PF.LoadingOverlay.hide(this._submitButton),this._emailInput.removeError(),this._wechatInput.removeError(),e.success)return localStorage.setItem(this._storageIsSubscribedKey,"1"),void this._onModalClose();this._showError()},_showError:function(){this._emailInput.setError("Please provide a valid email address"),this._wechatInput.setError("Please provide Wechat ID")},_shouldShowPopup:function(){if("undefined"==typeof Storage)return!1;try{localStorage.setItem("localStorage","1"),localStorage.removeItem("localStorage")}catch(e){return!1}var e=localStorage.getItem(this._storageCountKey)?Number(localStorage.getItem(this._storageCountKey)):0,t=null!==localStorage.getItem(this._storageIsSubscribedKey);return e<PF.Popup.ChinaPromo.TIMES_SHOULD_SHOW&&!t&&!$("body").hasClass("modal-open")},_incrementViewCount:function(){if(localStorage.getItem(this._storageCountKey)){var e=Number(localStorage.getItem(this._storageCountKey))+1;localStorage.setItem(this._storageCountKey,e.toString())}else localStorage.setItem(this._storageCountKey,"1")},_isMobile:function(){return $(window).innerWidth()<768}},mkE.Base),PF.Popup.ChinaPromo.TIMES_SHOULD_SHOW=1,PF.Popup.ChinaPromo.TIMEOUT_BEFORE_SHOW=3e3}()},mJTt:function(e,t){!function(){"use strict";PF.Popup.DesignerLeaveWarning=Class({_DESIGNER_CONTENT:"js--product-push-designer",_DESIGNER_HAS_BEFORE_CLOSE:"js--has-before-close",_VARIANT_CONTINUE_BUTTON:"js--variant-picker-continue-button",_BACK_TO_CATALOG_LINK:"js--back-to-catalog-link",_NAVIGATION_BACK:"js--back",_NAVIGATION_BUTTONS:"navigation__sticky-buttons",_ORDER_STEPS:"pf-steps__item",_isOkToLeave:!1,_didDesignChange:!1,_templates:null,_templateLayers:null,_isModalDesigner:null,__construct:function(e,t){PF.Events.emit(PF.Events.DESIGNER_REMOVE_LEAVE_WARNING),this._isOkToLeave=!1,this._didDesignChange=!1,this._templates=e,this._templateLayers=this._getAllLayersToArray(),this._isModalDesigner=t;var o=new PF.Modal.Par;o.title=dlang("generator","Are you sure?"),o.modalDialogClass="modal-md",o.nodeClass="pf-p-0",o.closeOnClick=!1,o.allowEsc=!1,o.deleteOnHide=!0,this.modal=new PF.Modal(o);var a=tag("div","pf-ui-body",dlang("generator","If you leave, your changes won't be saved.")),s=tag("div","pf-d-flex pf-flex-column pf-flex-xs-row",[tag("a",{onclick:this._backToDesigner.bind(this),className:"pf-btn pf-btn-primary pf-mb-12 pf-mb-xs-0 pf-mr-xs-12",text:dlang("generator","Stay")}),tag("a",{onclick:this._leaveDesigner.bind(this),className:"pf-btn pf-btn-secondary",text:dlang("generator","Leave")})]);this.modal.setContent(a),this.modal.setFooterContent(s),this._onClickCheck=this._onClickCheck.bind(this),this._onDocumentLeave=this._onDocumentLeave.bind(this),this._onUpdate=this._onUpdate.bind(this),this._onRemoveWarning=this._onRemoveWarning.bind(this),document.addEventListener("click",this._onClickCheck,!0),window.addEventListener("beforeunload",this._onDocumentLeave),PF.Events.on(PF.Events.DESIGN_UPDATE,this._onUpdate),PF.Events.on(PF.Events.DESIGNER_REMOVE_LEAVE_WARNING,this._onRemoveWarning)},_onRemoveWarning:function(){document.removeEventListener("click",this._onClickCheck,!0),window.removeEventListener("beforeunload",this._onDocumentLeave),PF.Events.off(PF.Events.DESIGN_UPDATE,this._onUpdate),PF.Events.off(PF.Events.DESIGNER_REMOVE_LEAVE_WARNING,this._onRemoveWarning)},_onUpdate:function(){var e=this._getAllLayersToArray();if(e.length===this._templateLayers.length){PF.Popup.DesignerLeaveWarning.updateInitialStateLayers&&(this._templateLayers=PF.Popup.DesignerLeaveWarning.updateInitialStateLayers,PF.Popup.DesignerLeaveWarning.updateInitialStateLayers=null),PF.Popup.DesignerLeaveWarning.isForceUpdateRequred&&(PF.Popup.DesignerLeaveWarning.isForceUpdateRequred=null);for(var t=0;t<this._templateLayers.length;t++){var o=e[t],a=this._templateLayers[t];if(this._normalizeProperties([o,a]),Object.entries(o).toString()!==Object.entries(a).toString()||Object.entries(o.position).toString()!==Object.entries(a.position).toString())return void(this._didDesignChange=!0)}this._didDesignChange=!1}else this._didDesignChange=!0},_getAllLayersToArray:function(){var e=[],t=this._templates.getTemplates();for(var o in t)for(var a in t[o])for(var s in t[o][a].layers){var i=t[o][a].layers[s],n=Object.assign({},i.toArray());e.push(n)}return e},_normalizeProperties:function(e){e.forEach((function(e){delete e.overrideImagePulse,delete e.overrideImage,e.position.top=parseFloat(parseFloat(e.position.top).toFixed(4)),e.position.left=parseFloat(parseFloat(e.position.left).toFixed(4)),e.position.width=parseFloat(parseFloat(e.position.width).toFixed(4)),e.position.height=parseFloat(parseFloat(e.position.height).toFixed(4))}))},_onDocumentLeave:function(e){if(this._didDesignChange){var t=document.querySelectorAll("#"+this._DESIGNER_CONTENT).length>0;PF.Popup.DesignerLeaveWarning.disable||this._isOkToLeave||!t||(e.preventDefault(),e.returnValue="")}},_backToDesigner:function(){this.modal.hide()},_leaveDesigner:function(){this._isOkToLeave=!0,this.modal.remove(),this.target.click()},_onClickCheck:function(e){if((PF.Popup.DesignerLeaveWarning.isForceUpdateRequred||PF.Popup.DesignerLeaveWarning.updateInitialStateLayers)&&this._onUpdate(),!PF.Popup.DesignerLeaveWarning.disable){var t=document.querySelectorAll("#"+this._DESIGNER_CONTENT);if(t.length<1)this._isModalDesigner&&this._isTargetNavigatingBack(e.target)&&(PF.Popup.DesignerLeaveWarning.isForceUpdateRequred=!0);else if(this._didDesignChange&&!this._isOkToLeave){for(var o=t,a=0;a<o.length;a++){var s=e.target.closest(".modal-dialog")&&!e.target.closest(".modal-dialog").contains(o[a]);if(o[a].contains(e.target)&&!this._isTargetConfirmingDesign(e.target)||s)return}this._isTargetConfirmingDesign(e.target)?this._didDesignChange=!1:this._isTargetClickWithinDesigner(e.target)||this._setTargetAndShowModal(e)}}},_isTargetConfirmingDesign:function(e){if(e.id===this._VARIANT_CONTINUE_BUTTON&&e.className.indexOf("disabled")<0)return!0;if("A"!==e.nodeName||this._isTargetNavigatingBack(e))return!1;for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(this._NAVIGATION_BUTTONS))return!0;return!1},_isTargetClickWithinDesigner:function(e){return!(this._isTargetCloseButton(e)||this._isTargetAnchorWithLink(e)||this._isTargetProductPushProductLink(e)||this._isTargetNavigatingBack(e))},_isTargetCloseButton:function(e){if("SPAN"===e.nodeName&&-1!==e.className.indexOf("pf-modal__close-icon")){for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(this._DESIGNER_HAS_BEFORE_CLOSE))return!1;return!0}},_isTargetAnchorWithLink:function(e){return"A"===e.nodeName&&e.href.indexOf("javascript")<0},_isTargetProductPushProductLink:function(e){for(var t=0;e&&e!==document&&t<3;){if("A"===e.nodeName&&e.classList.contains(this._ORDER_STEPS)&&-1!==e.innerText.indexOf(lang("Product")))return!0;e=e.parentNode,t++}},_isTargetNavigatingBack:function(e){return"A"===e.nodeName&&(e.id===this._BACK_TO_CATALOG_LINK||e.id===this._NAVIGATION_BACK)},_setTargetAndShowModal:function(e){e.stopImmediatePropagation(),e.preventDefault(),this.target=e.target,this._isOkToLeave=!1,this.modal.show()}}),PF.Popup.DesignerLeaveWarning.disable=!1,PF.Popup.DesignerLeaveWarning.updateInitialStateLayers=null,PF.Popup.DesignerLeaveWarning.isForceUpdateRequred=!1}()},"u/SZ":function(e,t){!function(){"use strict";var e=function(){this.isOkToLeave=!1,this.didOrderChange=!1;var e=new PF.Modal.Par;e.title=dlang("orders","Are you sure you want to leave this page?"),e.modalDialogClass="modal-md",e.nodeClass="pf-p-0",e.onClose=this.onClose.bind(this),this.modal=new PF.Modal(e);var t=tag("div","pf-ui-body",dlang("orders","All changes you've made to the order will be lost. If you want to confirm the changes, please return and proceed to the next steps until you update the order.")),o=tag("div","pf-d-flex pf-flex-column pf-flex-xs-row",[{tag:"a",onclick:this.backToOrder.bind(this),className:"pf-btn pf-btn-primary pf-mb-12 pf-mb-xs-0 pf-mr-xs-12",text:dclang("orders","used-only-here","Back to the order")},{tag:"a",onclick:this.leaveOrder.bind(this),className:"pf-btn pf-btn-secondary",els:[tag("span","",dlang("orders","Leave"))]}]);this.modal.setContent(t),this.modal.setFooterContent(o),this.addClickListener(),window.addEventListener("beforeunload",this.onDocumentLeave.bind(this)),PF.Events.on(PF.Events.ORDER_UPDATE,function(){this.didOrderChange=!0}.bind(this))};e.prototype.CLASS_IGNORE="ignorethis",e.prototype.CLASS_DROPDOWN="dropdown-toggle",e.prototype.CLASS_ORDER_FLOW_BUTTON="order-flow__button",e.prototype.SELECTOR_HEADCRUMBS=".headcrumbs",e.prototype.SELECTOR_STEPS=".pf-steps__item",e.prototype.SELECTOR_CONTENT="#content",e.prototype.AWS_S3_PATH="s3.amazonaws",e.prototype.onDocumentLeave=function(e){if(this.didOrderChange){var t=document.activeElement,o=t&&t.closest(this.SELECTOR_CONTENT);this.isOkToLeave||o||(e.preventDefault(),e.returnValue="")}},e.prototype.backToOrder=function(){this.modal.hide()},e.prototype.leaveOrder=function(){this.isOkToLeave=!0,this.modal.remove(),this.target.click()},e.prototype.onClose=function(){this.target.className=this.target.className.replace(this.CLASS_IGNORE,"")},e.prototype.clickCallback=function(e){this.target=e.target,-1===this.target.className.indexOf(this.CLASS_IGNORE)&&(e.stopImmediatePropagation(),e.preventDefault(),this.target.className+=" "+this.CLASS_IGNORE,this.modal.show())},e.prototype.forEachCallback=function(e,t){t.closest(this.SELECTOR_CONTENT)&&!t.closest(this.SELECTOR_HEADCRUMBS)||-1===t.className.indexOf(this.CLASS_DROPDOWN)&&t.addEventListener("click",e)},e.prototype.addClickListener=function(){var e=this.clickCallback.bind(this),t=this.forEachCallback.bind(this,e);[].forEach.call(document.querySelectorAll("a"),t),document.addEventListener("click",function(e){var t=!!e.target.closest(this.SELECTOR_STEPS),o=e.target.classList.contains(this.CLASS_ORDER_FLOW_BUTTON),a=e.target.href&&-1!==e.target.href.indexOf(this.AWS_S3_PATH);(t||o||a)&&(this.isOkToLeave=!0)}.bind(this))},PF.Popup.OrderLeaveWarning=function(){new e}}()}},[[26,0]]]);